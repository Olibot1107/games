let catX,catY,gameStart,food,time,loose,win,speed=1;const PICKUP=[2.1,,348,.02,.02,.08,1,.8,4,,288,.05,,.2,,.1,.07,.66,.01,,348],HIT=[,,55,.02,.09,.12,,3.9,,5,,,,.1,,.4,,.95,.09],EXPLOSION=[2,,57,.09,.06,.25,4,.1,,6,,,,.6,,.2,.16,.38,.11];let foodObjects,boxObjects,playerCat={catX:100,catY:50,sprite:null},playerState="move",tapDirection="move";function init(){gameStart=!1,win=!1,loose=!1,textsize(40),playerCat={catX:100,catY:50,sprite:null},food=0,time=1800,foodObjects=[{foodX:250,foodY:50,foodShow:!0},{foodX:280,foodY:30,foodShow:!0},{foodX:450,foodY:50,foodShow:!0},{foodX:650,foodY:30,foodShow:!0},{foodX:850,foodY:50,foodShow:!0},{foodX:990,foodY:30,foodShow:!0},{foodX:1100,foodY:50,foodShow:!0},{foodX:1400,foodY:30,foodShow:!0},{foodX:1500,foodY:50,foodShow:!0},{foodX:1800,foodY:30,foodShow:!0}],boxObjects=[{posX:310,posY:50,isShow:!0},{posX:375,posY:30,isShow:!0},{posX:420,posY:30,isShow:!0},{posX:600,posY:50,isShow:!0},{posX:820,posY:30,isShow:!0},{posX:1300,posY:50,isShow:!0},{posX:1500,posY:50,isShow:!0},{posX:1550,posY:30,isShow:!0},{posX:1750,posY:30,isShow:!0},{posX:2e3,posY:50,isShow:!0}],playerState="move",tapDirection="move"}litecanvas({width:200,height:200});let blackCat="\n    ....................\n    ....................\n    ....................\n    .000..........0...0.\n    0..0..000000..00000.\n    00....0000000005050.\n    000..00000000000000.\n    .00000000..0000.....\n    ......000...00......\n    ......0.0...0.0.....\n    ";const box="\n    0000000000\n    0000000000\n    0000000000\n    0000000000\n    0000000000",cheese="\n    55.5.\n    .5.55\n    55.55\n    .5555.";function update(){if(0==gameStart&&iskeypressed("space")&&(init(),gameStart=!0),1==gameStart){if(speed>=.001&&(speed-=.001),"move"==playerState&&(playerCat.catX+=1*speed,iskeydown("ArrowUp")?playerCat.catY=30:iskeydown("ArrowDown")&&(playerCat.catY=50)),foodObjects)for(let o=0;o<foodObjects.length;o++){let t=foodObjects[o].foodX,e=foodObjects[o].foodY,s=foodObjects[o].foodShow;1==MacroCollision(playerCat.catX,playerCat.catY,t,e)&&1==s&&(foodObjects[o].foodShow=!1,food+=1,speed+=1,sfx(PICKUP),food>=9&&(win=!0))}if(boxObjects)for(let o=0;o<boxObjects.length;o++){let t=boxObjects[o].posX,e=boxObjects[o].posY,s=boxObjects[o].isShow;1==MacroCollision(playerCat.catX,playerCat.catY,t,e)&&1==s&&("stand"!=playerState&&speed>0&&(sfx(HIT),speed=0,playerState="stand"),(iskeypressed("space")||"explosion"==tapDirection)&&(sfx(EXPLOSION),boxObjects[o].isShow=!1,playerState="move",tapDirection="move",speed=1))}}}function tap(o,t){o>=165&&o<=180&&t>175&&t<=190?(playerCat.catY=30,tapDirection="explosion"):o>180&&o<=195&&t>175&&t<=190?(playerCat.catY=50,tapDirection="explosion"):o>175&&o<190&&t>=165&&t<175?(playerCat.catY=30,tapDirection="explosion"):o>175&&o<190&&t>=175&&t<195&&(playerCat.catY=50,tapDirection="explosion")}function untap(o,t){tapDirection="stand"}function tapped(o,t){0==gameStart&&0==loose&&(init(),gameStart=!0)}function draw(){cls(0);const o=W/12,t=.5*o,e=1.5*o;if(textsize(o),textfont("sans-serif"),0==gameStart&&0==loose)text(t,t+2*e,"Tom Black Cat!",5),text(t,t+4*e,"Press SPACE to Start!",5);else if(0==gameStart&&1==loose)text(t,t+2*e,"You lost!",5),text(t,t+4*e,"Press SPACE to Restart!",5);else if(1==win&&1==gameStart)text(t,t+2*e,"You won!",5),text(t,t+4*e,"Refresh PAGE to Restart!",5);else if(1==gameStart){if(time--,time<=0&&(loose=!0,gameStart=!1),push(),translate(W/2-playerCat.catX,H/2-playerCat.catY),background(),foodObjects)for(let o=0;o<foodObjects.length;o++)1==foodObjects[o].foodShow&&spr(foodObjects[o].foodX,foodObjects[o].foodY,4,5,cheese);if(boxObjects)for(let o=0;o<boxObjects.length;o++)1==boxObjects[o].isShow&&spr(boxObjects[o].posX,boxObjects[o].posY,10,5,box);spr(playerCat.catX,playerCat.catY,20,10,blackCat),pop(),textsize(14),text(0,0,"Food: "+food,3,"bold"),text(0,15,"Time: "+Math.round(time/60),3,"bold"),circfill(180,180,20,3),circfill(180,180,10,5),linewidth(2),moveTo(180,180),line(180,165,180,175,0),line(175,168,180,165,0),line(185,168,180,165,0),line(180,185,180,195,0),line(175,190,180,195,0),line(185,190,180,195,0)}}function background(o=10){const t=12,e=4*W/t,s=4*H/t;push(),translate(-W,-H);for(let a=0;a<s;a++)for(let s=0;s<20*e;s++)rectfill(s*t,a*t,t,t,o);pop()}function MacroCollision(o,t,e,s){let a=!1,i=!1;return o+20>=e&&o<=e+4&&(a=!0),t+10>=s&&t<=s+5&&(i=!0),1==a&&1==i}