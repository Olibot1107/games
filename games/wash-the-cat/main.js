const mge={TITLE:'Mini Game Engine',VERSION:'V1.1.1',bi:{},bu:{},cj:{},dd:{},dx:{},hl:{}};mge.hq={get hn(){return mge.bi.ah.currentTime},get ho(){return mge.bi.bj},set ho(_value){mge.bi.bf(_value)},};mge.hs={get bpm(){return mge.hl.fw},set bpm(_value){mge.hl.fw=_value},hr:function(gc,gd,bj){return mge.hl.gb(gc,gd,bj)},start:function(){mge.hl.cf()},stop:function(){mge.hl.hc()},reset:function(){mge.hl.hm()}};mge.ku={get width(){return mge.bu.bn.width},set width(_value){mge.bu.bn.width=_value},get height(){return mge.bu.bn.height},set height(_value){mge.bu.bn.height=_value},get context(){return mge.bu.bo},start:function(ce){mge.cj.cf(ce)},hu:function(ce){mge.cj.cd(ce)},hv:function(){return mge.cj.ca()}};mge.ia={get hz(){return mge.dx.df},get x(){return mge.dx._x},get y(){return mge.dx._y}};mge.fu={set ig(_value){this.dz=_value},get width(){return this.bk},set width(_value){this.bk=_value},get height(){return this.bl},set height(_value){this.bl=_value},get x(){return this._x},set x(_value){this._x=_value},get y(){return this._y},set y(_value){this._y=_value},get ih(){return this.br},set ih(_value){this.br=_value},get ii(){return this.bs},set ii(_value){this.bs=_value},get ij(){return this.ee},set ij(_value){this.ee=_value},get hz(){return this.df()},draw:function(){this.ek()},iq:function(){return this.fg()},is:function(){this.fl()},ir:function(){this.fj()},it:function(rf){return this.fn(rf)}};mge.bi.aa=function(ab,ac,ad,ae){let a=ab.a||0.0001;let d=ab.d||0.0001;let s=ab.s||0.0001;let r=ab.r||0.0001;let af=ab.ro||0.0001;let ag=ab.rp||1;if(ae<=a){ac.setValueAtTime(af,ad);ac.exponentialRampToValueAtTime(ag*ae/a,ad+ae);ac.exponentialRampToValueAtTime(af,ad+ae+r)}else if(ae<=a+d){ac.setValueAtTime(af,ad);ac.exponentialRampToValueAtTime(ag,ad+a);ac.exponentialRampToValueAtTime(ag*s*d/ae,ad+ae);ac.exponentialRampToValueAtTime(af,ad+ae+r)}else{ac.setValueAtTime(af,ad);ac.exponentialRampToValueAtTime(ag,ad+a);ac.exponentialRampToValueAtTime(ag*s,ad+a+d);ac.setValueAtTime(ag*s,ad+ae);ac.exponentialRampToValueAtTime(af,ad+ae+r)}};mge.bi.hm=function(){this.ah='';this.ai='';this.bj=1;this.ah=new(window.AudioContext||window.webkitAudioContext)();this.ai=this.ah.createGain();this.ai.connect(this.ah.destination)};mge.bi.bf=function(bj){if(bj<=0){mge.bi.bj=0}else if(bj>=1){mge.bi.bj=1}else{mge.bi.bj=bj};mge.bi.ai.gain.setValueAtTime(mge.bi.bg(mge.bi.bj),mge.hq.hn)};mge.bi.bg=function(bj){let bh=30;if(bj<=0){return 0;}else if(bj>=1){return 1;}else{return Math.pow(10,(bj-1)*bh/10)}};mge.bu.hm=function(bk,bl,bm){this.bn='';this.bo='';this.bn=document.getElementById(bm);if(this.bn){this.bn.remove()};this.bn=document.createElement('canvas');this.bn.id=bm;this.bn.width=bk;this.bn.height=bl;document.body.appendChild(this.bn);this.bo=this.bn.getContext('2d')};mge.bu.bp=function(){let br=(window.innerWidth-10)/this.bn.width;let bs=(window.innerHeight-10)/this.bn.height;let bt=Math.min(br,bs);this.bn.style.transform='scale('+bt+')';this.bn.display='block'};mge.cj.hm=function(bk,bl){this.bx='';this.by='';this.bz=[];mge.bu.hm(bk,bl,'re');mge.dx.hm(mge.bu.bn);mge.bi.hm();mge.hl.hm();mge.dd.hm()};mge.cj.ca=function(){let cc=Object.create(mge.fu);cc.hm(mge.bu.bo);mge.cj.bz.push(cc);return cc};mge.cj.cd=function(ce){if(!ce.start){ce.start=function(){}};if(!ce.update){ce.update=function(){}};if(!ce.draw){ce.draw=function(){}};this.by=ce};mge.cj.cf=function(ce){this.cd(ce);mge.dd.cf()};mge.dd.hm=function(){this.cv=0;this.cw=0;this.cx=0};mge.dd.cf=function(){this.db()};mge.dd.db=function(){mge.dd.cw=performance.now();mge.dd.cx=mge.dd.cw-mge.dd.cv;if(mge.dd.cx>=16){mge.dx.ct();if(mge.cj.bx !=mge.cj.by){mge.cj.bx=mge.cj.by;mge.dx.cs();mge.cj.bx.start()};mge.cj.bx.update();mge.cj.bz.forEach(fu=>{fu.fe();});mge.bu.bo.clearRect(0,0,mge.bu.bn.width,mge.bu.bn.height);mge.cj.bx.draw();mge.bu.bp();mge.hl.gy();mge.dd.cv=mge.dd.cw};requestAnimationFrame(mge.dd.db)};mge.dx.dq=function(e){this.dm=true;this.dk=e.offsetX;this.dl=e.offsetY};mge.dx.ds=function(e){this.dk=e.offsetX;this.dl=e.offsetY};mge.dx.dt=function(e){this.dk='';this.dl=''};mge.dx.cs=function(){this._x=0;this._y=0;this.df=false;this.dk=0;this.dl=0;this.dm=false};mge.dx.ct=function(){this._x=this.dk;this._y=this.dl;this.df=this.dm;this.dm=false};mge.dx.hm=function(bq){this._x=0;this._y=0;this.df=false;this.dk=0;this.dl=0;this.dm=false;bq.onclick=function(e){mge.dx.dq(e)}};mge.fu.hm=function(dy){this.dy=dy;this.dz=function(){};this.bk=100;this.bl=100;this._x=0;this._y=0;this.br=1;this.bs=1;this.ee=true;this.ei=[];this.ej=false};mge.fu.ek=function(){if(this.ee){let dy=this.dy;dy.save();dy.translate(this._x-this.bk*this.br/2,this._y-this.bl*this.bs/2);dy.scale(this.br,this.bs);this.dz(dy);dy.restore()}};mge.fu.df=function(){if(this.ew()&& mge.dx.df){return true;}else{return false}};mge.fu.ew=function(){let ez=this._x+(this.bk/2)*this.br;let fa=this._x-(this.bk/2)*this.br;let fb=this._y+(this.bl/2)*this.bs;let fc=this._y-(this.bl/2)*this.bs;if(mge.dx._x>=fa && mge.dx._x<=ez && mge.dx._y>=fc && mge.dx._y<=fb){return true;}else{return false}};mge.fu.fe=function(){let ff=[];this.ei.forEach(ft=>{if(ft.ej){ff.push(ft)};});this.ei=ff};mge.fu.fg=function(){let ft=Object.create(this);ft.ej=true;this.ei.push(ft);return ft};mge.fu.fl=function(){this.ej=false};mge.fu.fj=function(){this.ei=[]};mge.fu.fn=function(rf){this.ei.forEach(ft=>{ft[rf]();})};mge.hl.hm=function(){this.fv=[];this.fw=60;this.fx=1;this.fy=0;this.fz=0;this.cz='rh'};mge.hl.gi=function(gj){let gk={C:32.7,Db:34.6,D:36.7,Eb:38.9,E:41.2,F:43.6,Gb:46.2,G:49,Ab:51.9,A:55,Bb:58.3,B:61.7};let gl=parseInt(gj.substr(gj.length-1,gj.length),10);let gm=gj.substr(0,gj.length-1);let am=gk[gm]*Math.pow(2,gl);return Math.round(am)};mge.hl.gb=function(gc,gd,bj){let gh=Object.create(mge.hl.gg);gh.gc=gc;gh.gd=gd;gh.bj=bj;mge.hl.fv.push(gh);return gh};mge.hl.go=function(gg,gq){let gt=gg.hi(gq);let gu=this.fy;for(let i=0;i<gt.length;i+=2){let gm=gt[i];let gmFrequency=this.gi(gm);let ae=gt[i+1]*60/this.fw;gg.gd.play(gmFrequency,gu,ae,gg.bj);gu+=ae}};mge.hl.gy=function(){if(mge.bi.ah.currentTime>=this.fz && this.cz=='rg'){for(let i=0;i<this.fv.length;i++){let gg=this.fv[i];this.go(gg,this.fx)};this.fx+=1;this.fz=this.fy+3*60/this.fw;this.fy+=4*60/this.fw}};mge.hl.cf=function(){this.fx=1;this.fy=mge.bi.ah.currentTime;this.fz=0;this.cz='rg'};mge.hl.hc=function(){this.cz='rh'};mge.hl.gg={gc:[],gd:{},bj:1,bf:function(bj){if(bj<=0){this.bj=0}else if(bj>=1){this.bj=1}else{this.bj=bj}},hi:function(hj){let hk=this.gc.length;if(hk==0){return ''}else if(hj%hk==0){return this.gc[hk-1]}else{return this.gc[hj%hk-1]}}};mge.cj.hm(640,360);mge.ki={kj:{}};mge.ki.rk=function(ft){ft.kt=Object.create(ft.__proto__.kt)};mge.ki.jeExtension=function(fu){fu.kt=Object.create(mge.ki.kj);fu.kt.hm()};mge.kt={loadExtention:function(fu){mge.ki.jeExtension(fu)},activateOwnCloneAnimation:function(ft){mge.ki.rk(ft)}};mge.ki.kj={set timeBetweenFrames(_value){this.kr=_value},get timeBetweenFrames(){return this.kr},set frames(kn){this.km(kn)},draw:function(dy){this.ek(dy)},restart:function(){this.ks()}};mge.ki.kj.ek=function(dy){if(this.kp==-1){this.kp=0;this.kq=Date.now();}else if(Date.now()- this.kq>this.kr){this.kp+=1;if(this.kp>this.kn.length-1){this.kp=0};this.kq=Date.now()};this.kn[this.kp].draw(dy)};mge.ki.kj.km=function(kn){this.kn=kn;this.kp==-1;this.kq=Date.now()};mge.ki.kj.hm=function(){this.kn=[];this.kp=-1;this.kq=Date.now();this.kr=100};mge.ki.kj.ks=function(){this.kp=-1};mge.jo={jp:{jq:[]},jr:{}};mge.jo.jr={set config(_value){this.jj(_value)},load:function(){this.je()},play:function(fw,gds,_mix){this.gy(fw,gds,_mix)}};mge.song={create:function(){return mge.jo.jp.hmSong()}};mge.jo.jr.hm=function(){this.iz={};this.ja=false;this.fv=[]};mge.jo.jr.je=function(){let iz=this.iz;let fv=[];iz._p.forEach(function(_part){let _currentPart=[];iz._str.forEach(function(_section){_part._s[_section].forEach(function(gt){_currentPart.push(_part._b[gt]);});});fv.push(_currentPart);});this.fv=fv;this.ja=true};mge.jo.jr.gy=function(fw,gds,_mix){let jy={play:function(am,ad,ae,bj){let ak={hoADSR:{a:0.02,d:400,s:0,r:0.1,ro:0,rp:bj},oscType:'sine'};mge.hq.hp(ak,am,ad,ae,bj)}};if(!this.ja){this.je()};mge.hs.stop();mge.hs.reset();let jz=0;this.fv.forEach(function(gg){mge.hs.hr(gg,gds[jz]||jy,_mix[jz]||1);jz+=1;});mge.hs.bpm=fw;mge.hs.start()};mge.jo.jr.jj=function(_value){this.iz=_value;this.ja=false;this.fv=[]};mge.jo.jp.hmSong=function(){let kd=Object.create(mge.jo.jr);kd.hm();this.jq.push(kd);return kd};ku={kv:{kw:{},kx:{}},ky:{qw:mge.ku.hv(),cat:mge.ku.hv(),kz:mge.ku.hv(),qu:mge.ku.hv(),qv:mge.ku.hv()},levels:[],curLevel:0,rn:false,kxColor:195,ktInProgress:false,lh:'lj',hqOn:true,getLevelState:function(){if(ku.ky.cat.mp>=1){ku.li='won'}else if(ku.ky.cat.x>=ku.ky.cat.maxX && ku.ky.cat.mp>=0.8){ku.li='won'}else if(ku.ky.cat.x>=ku.ky.cat.maxX && ku.ky.cat.mp<0.8){ku.li='failed'}else{ku.li='running'};if(ku.li!='running'){ku.rn=true}},hsl:function(h,s,l){return 'hsl('+h+' '+s+'% '+l+'%)'},lb:{},lc:{},lf:{}};window.addEventListener("load",(event)=>{let loading=document.getElementById("loading");loading.remove();mge.ku.width=1280;mge.ku.height=720;mge.ku.start(ku.kv.kw)});ku.lb.lk=new Map();ku.lb.ll={type:'sawtooth',lm:0,hoADSR:{a:0,d:0,s:0,r:0,ro:0,rp:0},lo:{a:0,d:0,s:1,r:0,ro:0,rp:0},lp:'lowpass',filterQ:1,lq:{a:0,d:0,s:1,r:0,ro:10000,rp:10000},lr:{delay:0,rr:0},play:function(dy,am,ad,ae,_destination){let osc=dy.createOscillator();osc.type=this.type;osc.frequency.setValueAtTime(am,ad);if(this.lm==-1){osc.frequency.setValueAtTime(am/2,ad)};if(this.lm==1){osc.frequency.setValueAtTime(am*2,ad)};mge.bi.aa(this.lo,osc.detune,ad,ae);let ls=dy.createGain();mge.bi.aa(this.hoADSR,ls.gain,ad,ae);let lt=dy.createBiquadFilter();lt.type=this.lp;lt.Q.value=this.filterQ;mge.bi.aa(this.lq,lt.frequency,ad,ae);let bd=new DelayNode(dy,{delayTime:this.lr.delay});let be=dy.createGain();be.gain.value=this.lr.rr;osc.connect(lt);lt.connect(ls);ls.connect(_destination);ls.connect(bd);bd.connect(be);be.connect(bd);be.connect(_destination);osc.start(ad);osc.stop(ad+ae+this.hoADSR.r)}};ku.lb.rq={name:'rq',osc1:{},osc2:{},osc3:{},init:function(){this.osc1=Object.create(ku.lb.ll);this.osc2=Object.create(ku.lb.ll);this.osc3=Object.create(ku.lb.ll)},lw:function(am,ae){return this.name+'-'+(Math.round(am*100)/100).toString()+'-'+(Math.round(ae*100)/100).toString()},lx:function(am,ae){let  offlineContext=new OfflineAudioContext(2,ae*1.5*44100,44100);this.osc1.play(offlineContext,am,0,ae,offlineContext.destination);this.osc2.play(offlineContext,am,0,ae,offlineContext.destination);this.osc3.play(offlineContext,am,0,ae,offlineContext.destination);offlineContext.startRendering().then(renderedBuffer=>{ku.lb.lk.set(this.lw(am,ae),renderedBuffer);})},ly:function(am,ad,ae,bj){let dy=mge.bi.ah;let bjGain=dy.createGain();bjGain.gain.setValueAtTime(bj,ad);bjGain.connect(mge.bi.ai);this.osc1.play(dy,am,ad,ae,bjGain);this.osc2.play(dy,am,ad,ae,bjGain);this.osc3.play(dy,am,ad,ae,bjGain)},lz:function(am,ad,ae,bj){let ctx=mge.bi.ah;let source=ctx.createBufferSource();source.buffer=ku.lb.lk.get(this.lw(am,ae));let soundGain=ctx.createGain();soundGain.gain.setValueAtTime(bj,ad);source.connect(soundGain);soundGain.connect(mge.bi.ai);source.start(ad);source.stop(ad+ae*1.5)},play:function(am,ad,ae,bj){if(!isNaN(am)){if(ku.lb.lk.get(this.lw(am,ae))==undefined){this.ly(am,ad,ae,bj);this.lx(am,ae);}else{this.lz(am,ad,ae,bj)}}}};ku.lb.init=function(){ku.lb.ma=Object.create(ku.lb.rq);ku.lb.ma.init();ku.lb.ma.name='ma';ku.lb.ma.osc1.type='sawtooth';ku.lb.ma.osc1.hoADSR={a:0.02,d:0.3,s:0.8,r:0.1,ro:0,rp:1};ku.lb.ma.osc1.lp='lowpass';ku.lb.ma.osc1.lq={a:0.1,d:0.1,s:0.8,r:0.1,ro:1000,rp:2000};ku.lb.ma.osc1.lr={delay:0.1,rr:0.4};ku.lb.ma.osc2.type='sawtooth';ku.lb.ma.osc2.lm=-1;ku.lb.ma.osc2.hoADSR={a:0.02,d:0.3,s:0.8,r:0.1,ro:0,rp:0.8};ku.lb.ma.osc2.lp='lowpass';ku.lb.ma.osc2.lq={a:0.1,d:0.1,s:0.8,r:0.1,ro:1000,rp:2000};ku.lb.ma.osc2.lr={delay:0.1,rr:0.4};ku.lb.ma.osc3.type='sawtooth';ku.lb.ma.osc3.hoADSR={a:0.02,d:0.3,s:0.8,r:0.1,ro:0,rp:1};ku.lb.ma.osc3.lp='lowpass';ku.lb.ma.osc3.lq={a:0.1,d:0.1,s:0.8,r:0.1,ro:1000,rp:2000};ku.lb.ma.osc3.lo={a:0.02,d:0.3,s:0.8,r:0.1,ro:-4,rp:4};ku.lb.ma.osc3.lr={delay:0.1,rr:0.4};ku.lb.mb=Object.create(ku.lb.rq);ku.lb.mb.name='mb';ku.lb.mb.init();ku.lb.mb.osc1.type='sawtooth';ku.lb.mb.osc1.hoADSR={a:0.005,d:0.15,s:0.3,r:0.1,ro:0,rp:1};ku.lb.mb.osc1.lp='lowpass';ku.lb.mb.osc1.lq={a:0.02,d:0.12,s:0.25,r:0.08,ro:1800,rp:2200};ku.lb.mb.osc1.lr={delay:0.1,rr:0.5};ku.lb.mb.osc2.type='sawtooth';ku.lb.mb.osc2.lm=0;ku.lb.mb.osc2.hoADSR={a:0.005,d:0.15,s:0.3,r:0.1,ro:0,rp:0.7};ku.lb.mb.osc2.lo={a:0,d:0,s:1,r:0,ro:3,rp:3};ku.lb.mb.osc2.lp='lowpass';ku.lb.mb.osc2.lq={a:0.02,d:0.12,s:0.25,r:0.08,ro:1800,rp:2200};ku.lb.mb.osc2.lr={delay:0.1,rr:0.5};ku.lb.mc=Object.create(ku.lb.rq);ku.lb.mc.name='mc';ku.lb.mc.init();ku.lb.mc.osc1.type='sawtooth';ku.lb.mc.osc1.hoADSR={a:0.01,d:0.2,s:0.7,r:0.5,ro:0,rp:1};ku.lb.mc.osc1.lp='lowpass';ku.lb.mc.osc1.lq={a:0.005,d:0.3,s:0.4,r:0.8,ro:3500,rp:4900};ku.lb.mc.osc1.filterQ=8;ku.lb.mc.osc1.lr={delay:0.1,rr:0.5};ku.lb.mc.osc2.type='sawtooth';ku.lb.mc.osc2.lm=0;ku.lb.mc.osc2.hoADSR={a:0.01,d:0.2,s:0.7,r:0.5,ro:0,rp:1};ku.lb.mc.osc2.lp='lowpass';ku.lb.mc.osc2.lq={a:0.005,d:0.3,s:0.4,r:0.8,ro:3500,rp:4900};ku.lb.mc.osc2.lo={a:0,d:0,s:1,r:0,ro:7,rp:7};ku.lb.mc.osc2.filterQ=8;ku.lb.mc.osc2.lr={delay:0.1,rr:0.5};ku.lb.cat=Object.create(ku.lb.rq);ku.lb.cat.name='cat';ku.lb.cat.init();ku.lb.cat.osc1.type='sawtooth';ku.lb.cat.osc1.hoADSR={a:0.05,d:0.1,s:0.5,r:0.2,ro:0,rp:1};ku.lb.cat.osc1.lp='lowpass';ku.lb.cat.osc1.lq={a:0.1,d:0.1,s:0.5,r:0.2,ro:500,rp:2000};ku.lb.cat.osc1.lo={a:0.05,d:0.1,s:0.5,r:0.2,ro:0,rp:100};ku.lb.cat.osc1.lr={delay:0.1,rr:0.2}};ku.lc.init=function(){ku.lc.kxSong=mge.song.create();ku.lc.kxSong.config={"_str":[0,1,2,3,4,5,6,7,8,9],"_p":[{"_b":[["r",4],["D1",4],["G1",4],["C1",4],["D1",1,"r",0.5,"D1",1,"r",0.5,"D1",1],["G1",1,"r",0.5,"G1",1,"r",0.5,"G1",1],["C1",1,"r",0.5,"C1",1,"r",0.5,"C1",1],["F1",4],["Bb1",4],["F1",1,"r",0.5,"F1",1,"r",0.5,"F1",1],["Bb1",1,"r",0.5,"Bb1",1,"r",0.5,"Bb1",1],["E1",1,"r",0.5,"E1",1,"r",0.5,"E1",1],["A1",1,"r",0.5,"A1",1,"r",0.5,"A1",1]],"_s":[[0,0,0,0],[1,2,3,3],[1,2,3,3],[1,2,3,3],[4,5,6,6],[4,5,6,6],[3,7,8,8],[0,0,0,0],[5,6,9,10,11,12,4,12],[0,0,0,0]]},{"_b":[["D2",1.5,"A2",1.5,"F2",1],["G2",1.5,"D2",1.5,"B2",1],["C2",1.5,"G2",1.5,"E2",1],["r",4],["C2",1.5,"G2",1.5,"Eb2",1],["F2",1.5,"C2",1.5,"A2",1],["Bb2",1.5,"F2",1.5,"D2",1],["D2",1.5,"A2",1.5,"Gb2",1],["G2",1.5,"D2",1.5,"Bb2",1],["E2",1.5,"Bb2",1.5,"G2",1],["A2",1.5,"E2",1.5,"Db2",1]],"_s":[[0,1,2,2],[0,1,2,2],[0,1,2,2],[0,1,2,2],[0,1,2,2],[0,1,2,2],[3,3,3,3],[4,5,6,7],[8,2,5,6,9,10,0,10],[0,1,2,2]]},{"_b":[["r",0.5,"F3",0.5,"F3",1,"A3",1,"C3",1],["r",0.5,"B3",0.5,"B3",1,"D3",1,"F3",1],["r",0.5,"E3",0.5,"E3",1,"G3",1,"B3",1],["F3",0.5,"F3",0.5,"F3",0.5,"F3",0.5,"A3",0.5,"A3",0.5,"C3",0.5,"C3",0.5],["B3",0.5,"B3",0.5,"B3",0.5,"B3",0.5,"D3",0.5,"D3",0.5,"F3",0.5,"F3",0.5],["E3",0.5,"E3",0.5,"E3",0.5,"E3",0.5,"G3",0.5,"G3",0.5,"B3",0.5,"B3",0.5],["r",4],["Bb3",0.5,"Bb3",0.5,"Bb3",0.5,"Bb3",0.5,"D3",0.5,"D3",0.5,"F3",0.5,"F3",0.5],["E3",0.5,"E3",0.5,"E3",0.5,"E3",0.5,"G3",0.5,"G3",0.5,"Bb3",0.5,"Bb3",0.5],["A3",0.5,"A3",0.5,"A3",0.5,"A3",0.5,"C3",0.5,"C3",0.5,"E3",0.5,"E3",0.5],["D3",0.5,"D3",0.5,"D3",0.5,"D3",0.5,"F3",0.5,"F3",0.5,"A3",0.5,"A3",0.5],["G3",0.5,"G3",0.5,"G3",0.5,"G3",0.5,"Bb3",0.5,"Bb3",0.5,"D3",0.5,"D3",0.5],["Db3",0.5,"Db3",0.5,"Db3",0.5,"Db3",0.5,"E3",0.5,"E3",0.5,"G3",0.5,"G3",0.5]],"_s":[[0,1,2,2],[0,1,2,2],[3,4,5,5],[3,4,5,5],[3,4,5,5],[3,4,5,5],[6,6,6,6],[6,6,6,6],[7,8,9,10,11,12,3,12],[6,6,6,6]]},{"_b":[["r",4],["F4",4],["B4",2,"F4",2],["E4",4],["E4",2,"B4",2],["D4",0.5,"F4",0.5,"A4",0.25,"F4",0.25,"A4",0.25,"C4",0.25,"D4",0.5,"F4",0.5,"A4",0.25,"F4",0.25,"A4",0.25,"C4",0.25],["G4",0.5,"B4",0.5,"D4",0.25,"B4",0.25,"D4",0.25,"F4",0.25,"G4",0.5,"B4",0.5,"D4",0.25,"B4",0.25,"D4",0.25,"F4",0.25],["C4",0.5,"E4",0.5,"G4",0.25,"E4",0.25,"G4",0.25,"B4",0.25,"C4",0.5,"E4",0.5,"G4",0.25,"E4",0.25,"G4",0.25,"B4",0.25],["D4",0.25,"A4",0.25,"F4",0.5,"A4",0.25,"F4",0.25,"A4",0.5,"D4",0.25,"A4",0.25,"F4",0.5,"A4",0.25,"F4",0.25,"A4",0.25,"C4",0.25],["G4",0.25,"D4",0.25,"B4",0.5,"D4",0.25,"B4",0.25,"D4",0.5,"G4",0.25,"D4",0.25,"B4",0.5,"D4",0.25,"B4",0.25,"D4",0.25,"F4",0.25],["C4",0.25,"G4",0.25,"E4",0.5,"G4",0.25,"E4",0.25,"G4",0.5,"C4",0.25,"G4",0.25,"E4",0.5,"G4",0.25,"E4",0.25,"G4",0.25,"B4",0.25],["Eb4",4],["A4",2,"Eb4",2],["D4",4],["D4",2,"A4",2],["Eb4",2,"Bb4",2],["A4",1,"C4",1,"Eb4",2],["Gb4",1,"A4",1,"C4",2],["G4",0.25,"D4",0.25,"Bb4",0.25,"F4",0.25,"D4",0.25,"Bb4",0.25,"D4",0.25,"F4",0.25,"G4",0.25,"D4",0.25,"Bb4",0.25,"F4",0.25,"D4",0.25,"Bb4",0.25,"D4",0.25,"F4",0.25],["C4",0.25,"G4",0.25,"E4",0.25,"Bb4",0.25,"G4",0.25,"E4",0.25,"G4",0.25,"Bb4",0.25,"C4",0.25,"G4",0.25,"E4",0.25,"Bb4",0.25,"G4",0.25,"E4",0.25,"G4",0.25,"Bb4",0.25],["F4",0.25,"C4",0.25,"A4",0.25,"E4",0.25,"C4",0.25,"A4",0.25,"C4",0.25,"E4",0.25,"F4",0.25,"C4",0.25,"A4",0.25,"E4",0.25,"C4",0.25,"A4",0.25,"C4",0.25,"E4",0.25],["Bb4",0.25,"F4",0.25,"D4",0.25,"A4",0.25,"F4",0.25,"D4",0.25,"F4",0.25,"A4",0.25,"Bb4",0.25,"F4",0.25,"D4",0.25,"A4",0.25,"F4",0.25,"D4",0.25,"F4",0.25,"A4",0.25],["E4",0.25,"Bb4",0.25,"G4",0.25,"D4",0.25,"Bb4",0.25,"G4",0.25,"Bb4",0.25,"D4",0.25,"E4",0.25,"Bb4",0.25,"G4",0.25,"D4",0.25,"Bb4",0.25,"G4",0.25,"Bb4",0.25,"D4",0.25],["A4",0.25,"E4",0.25,"Db4",0.25,"G4",0.25,"E4",0.25,"Db4",0.25,"E4",0.25,"G4",0.25,"A4",0.25,"E4",0.25,"Db4",0.25,"G4",0.25,"E4",0.25,"Db4",0.25,"E4",0.25,"G4",0.25],["D4",0.25,"A4",0.25,"F4",0.25,"C4",0.25,"A4",0.25,"F4",0.25,"A4",0.25,"C4",0.25,"D4",0.25,"A4",0.25,"F4",0.25,"C4",0.25,"A4",0.25,"F4",0.25,"A4",0.25,"C4",0.25],["A4",4]],"_s":[[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,4],[5,6,7,7],[8,9,10,10],[11,12,13,14],[15,16,14,17],[18,19,20,21,22,23,24,23],[25,0,0,0]]}]};ku.lc.kxSong.playSong=function(){mge.hs.stop();mge.hs.reset();let orchestra=[];orchestra.push(ku.lb.ma);orchestra.push(ku.lb.mb);orchestra.push(ku.lb.mb);orchestra.push(ku.lb.mc);let mix=[0.1,0.1,0.1,0.06];let bpm=110;mge.hq.ho=0.75;ku.lc.kxSong.play(bpm,orchestra,mix)}};ku.lf.create=function(){let me= document.createElement('canvas');me.width=mge.ku.width;me.height=mge.ku.height;me.style.display='none';document.body.appendChild(me);this.mf=me.getContext('2d');this.mg=me};ku.lf.generate=function(){let cloudCol=ku.hsl(ku.kxColor,100,65);let skyCol=ku.hsl(ku.kxColor,100,80);let build1Col=ku.hsl(ku.kxColor,100,55);let build1Co2=ku.hsl(ku.kxColor,100,45);let build1Co3=ku.hsl(ku.kxColor,100,35);let groundCol=ku.hsl(ku.kxColor,35,15);let ctx=this.mf;ctx.fillStyle=cloudCol;ctx.fillRect(0,0,mge.ku.width,mge.ku.height);ctx.shadowColor='white';ctx.shadowBlur=10;ctx.fillStyle=skyCol;for(let i=0;i<10;i++){let mh=Math.random()*mge.ku.width*0.8;let mi=Math.random()*mge.ku.height*0.6;ctx.beginPath();ctx.moveTo(mh,mi);for(let j=0;j<6;j++){mh+=Math.random()*50;ctx.lineTo(mh,mi-Math.random()*25)};ctx.lineTo(mh+30,mi);ctx.fill()};ctx.shadowColor='white';ctx.shadowBlur=0;ctx.fillStyle=build1Col;this.mj(ctx,30,400);ctx.fillStyle=build1Co2;this.mj(ctx,40,300);ctx.fillStyle=build1Co3;this.mj(ctx,50,200);ctx.fillRect(0,650,2000,200);ctx.fillStyle=groundCol;ctx.fillRect(0,680,2000,2000);ctx.strokeStyle=groundCol;for(let i=1;i<13;i++){ku.lf.mo(ctx,80,i*50+30);ku.lf.mo(ctx,1130,i*50+30)};for(let i=1;i<21;i++){ku.lf.mo(ctx,80+i*50,80)};ctx.fillStyle=ku.hsl(ku.kxColor,35,50);ctx.strokeStyle=groundCol;ctx.lineWidth=4;ctx.fillRect(380,40,500,90);ctx.strokeRect(380,40,500,90);ctx.font="bold 72px sans-serif";ctx.fillStyle='white';ctx.shadowColor='white';ctx.shadowBlur=20;ctx.fillText("CAT WASH",450,110);ctx.strokeStyle=groundCol;ctx.lineWidth=3;ctx.strokeText("CAT WASH",450,110)};ku.lf.mj=function(ctx,mk,ml){let x=-10;while(x<mge.ku.width){let mm=Math.random()*mk;let mn=Math.random()*ml;ctx.fillRect(x-mm/2,680,mm,-mn);x+=Math.random()*mk}};ku.lf.mo=function(ctx,x,y){ctx.lineWidth=4;ctx.strokeRect(x,y,50,50);ctx.beginPath();ctx.moveTo(x,y);ctx.lineTo(x+50,y+50);ctx.moveTo(x+50,y);ctx.lineTo(x,y+50);ctx.stroke()};ku.lf.draw=function(){mge.ku.context.drawImage(this.mg,0,0)};ku.rm=function(levelID){if(ku.curLevel !=levelID){ku.lf.generate()};ku.ky.cat.mp=0;ku.ky.kz.reInit();ku.ky.kz.ir();if(levelID>=ku.levels.length){levelID=0};ku.curLevel=levelID;ku.levels[ku.curLevel]()};ku.levels.push(function(){ku.ky.cat.x=500;ku.ky.cat.maxX=740;ku.ky.kz.od({X:630,oi:350,oe:100,of:200,og:180});ku.ky.kz.od({X:630,oi:-100,oe:2000,of:200,og:1,ij:'0'});ku.ky.kz.om({X:630,oi:200});ku.ky.kz.or({obj:['T0','D0']});ku.ky.kz.or({obj:['T1','D0'],ij:'0'});ku.ky.kz.oo({op:0,oh:0});ku.ky.kz.pd({X:630,oi:180,oqPipe:1})});ku.levels.push(function(){ku.ky.cat.x=450;ku.ky.cat.maxX=820;ku.ky.kz.od({X:400,oi:400,oe:100,of:75,og:25});ku.ky.kz.od({X:850,oi:400,oe:100,of:75,og:25});ku.ky.kz.od({X:520,oi:270,oe:50,of:100,og:0});ku.ky.kz.od({X:570,oi:270,oe:50,of:100,og:0});ku.ky.kz.od({X:710,oi:270,oe:50,of:100,og:0});ku.ky.kz.od({X:760,oi:270,oe:50,of:100,og:0});ku.ky.kz.od({X:540,oi:-100,oe:2000,of:200,og:1,ij:'0'});ku.ky.kz.ow([2,3]);ku.ky.kz.ow([4,5]);ku.ky.kz.om({X:500,oi:285,ij:'0'});ku.ky.kz.om({X:780,oi:285,ij:'0'});ku.ky.kz.om({X:570,oi:200});ku.ky.kz.om({X:710,oi:200});ku.ky.kz.or({obj:['T0','D0']});ku.ky.kz.or({obj:['T2','D0']});ku.ky.kz.or({obj:['T1','D1']});ku.ky.kz.or({obj:['T5','D1']});ku.ky.kz.or({obj:['T3','D2']});ku.ky.kz.or({obj:['T6','D2'],ij:'0'});ku.ky.kz.or({obj:['T4','D3']});ku.ky.kz.or({obj:['T6','D3'],ij:'0'});ku.ky.kz.oo({op:3,oh:0});ku.ky.kz.oo({op:4,oh:0});ku.ky.kz.pd({X:570,oi:180,oqPipe:5});ku.ky.kz.pd({X:710,oi:180,oqPipe:7})});ku.levels.push(function(){ku.ky.cat.x=580;ku.ky.cat.maxX=800;ku.ky.kz.od({X:400,oi:450,oe:100,of:100,og:60});ku.ky.kz.od({X:850,oi:450,oe:100,of:100,og:60});ku.ky.kz.od({X:500,oi:300,oe:50,of:120,og:1});ku.ky.kz.od({X:550,oi:300,oe:50,of:120,og:1});ku.ky.kz.od({X:650,oi:250,oe:50,of:170,og:1});ku.ky.kz.od({X:700,oi:250,oe:50,of:170,og:1});ku.ky.kz.od({X:750,oi:250,oe:50,of:170,og:1});ku.ky.kz.od({X:1000,oi:-100,oe:2000,of:200,og:1,ij:'0'});ku.ky.kz.ow([2,3]);ku.ky.kz.ow([4,5,6]);ku.ky.kz.om({X:420,oi:250,ij:'0'});ku.ky.kz.om({X:570,oi:200,ij:'0'});ku.ky.kz.om({X:700,oi:200});ku.ky.kz.om({X:770,oi:200,ij:'0'});ku.ky.kz.or({obj:['T0','D0']});ku.ky.kz.or({obj:['T2','D0']});ku.ky.kz.or({obj:['T3','D1']});ku.ky.kz.or({obj:['T4','D1']});ku.ky.kz.or({obj:['T5','D2']});ku.ky.kz.or({obj:['T7','D2'],ij:'0'});ku.ky.kz.or({obj:['T1','D3']});ku.ky.kz.or({obj:['T6','D3']});ku.ky.kz.pd({X:700,oi:180,oqPipe:5});ku.ky.kz.oo({op:0,oh:1});ku.ky.kz.oo({op:1,oh:1});ku.ky.kz.oo({op:3,oh:1})});ku.levels.push(function(){ku.ky.cat.x=600;ku.ky.cat.maxX=995;ku.ky.kz.od({X:330,oi:470,oe:80,of:100,og:47});ku.ky.kz.od({X:780,oi:470,oe:80,of:100,og:47});ku.ky.kz.od({X:430,oi:370,oe:40,of:100,og:0});ku.ky.kz.od({X:470,oi:370,oe:40,of:100,og:0});ku.ky.kz.od({X:640,oi:370,oe:40,of:100,og:0});ku.ky.kz.od({X:680,oi:370,oe:40,of:100,og:0});ku.ky.kz.od({X:530,oi:170,oe:50,of:155,og:0});ku.ky.kz.od({X:580,oi:170,oe:50,of:155,og:0});ku.ky.kz.od({X:885,oi:285,oe:80,of:185,og:100});ku.ky.kz.od({X:885,oi:-100,oe:2000,of:200,og:1,ij:'0'});ku.ky.kz.om({X:340,oi:375,ij:'0'});ku.ky.kz.om({X:770,oi:375,ij:'0'});ku.ky.kz.om({X:480,oi:280,ij:'0'});ku.ky.kz.om({X:630,oi:280,ij:'0'});ku.ky.kz.om({X:885,oi:200});ku.ky.kz.or({obj:['T0','D0']});ku.ky.kz.or({obj:['T2','D0']});ku.ky.kz.or({obj:['T1','D1']});ku.ky.kz.or({obj:['T5','D1']});ku.ky.kz.or({obj:['T3','D2']});ku.ky.kz.or({obj:['T6','D2']});ku.ky.kz.or({obj:['T4','D3']});ku.ky.kz.or({obj:['T7','D3']});ku.ky.kz.or({obj:['T8','D4']});ku.ky.kz.or({obj:['T9','D4'],ij:'0'});ku.ky.kz.ow([2,3]);ku.ky.kz.ow([4,5]);ku.ky.kz.ow([6,7]);ku.ky.kz.oo({op:3,oh:0});ku.ky.kz.oo({op:4,oh:0});ku.ky.kz.oo({op:8,oh:0,oq:{ql:7,height:80,direction:'L',length:300}});ku.ky.kz.pd({X:885,oi:180,oqPipe:9})});ku.levels.push(function(){ku.ky.cat.x=400;ku.ky.cat.maxX=1000;ku.ky.kz.od({X:400,oi:460,oe:100,of:100,og:85});ku.ky.kz.od({X:650,oi:460,oe:100,of:100,og:85});ku.ky.kz.od({X:900,oi:415,oe:100,of:100,og:85});ku.ky.kz.od({X:500,oi:350,oe:50,of:100,og:0});ku.ky.kz.od({X:550,oi:350,oe:50,of:100,og:0});ku.ky.kz.od({X:750,oi:250,oe:50,of:200,og:0});ku.ky.kz.od({X:800,oi:250,oe:50,of:200,og:0});ku.ky.kz.od({X:1050,oi:-100,oe:2000,of:200,og:1,ij:'0'});ku.ky.kz.om({X:420,oi:355,ij:'0'});ku.ky.kz.om({X:670,oi:255,ij:'0'});ku.ky.kz.om({X:570,oi:200,ij:'0'});ku.ky.kz.om({X:900,oi:200});ku.ky.kz.or({obj:['T0','D0']});ku.ky.kz.or({obj:['T3','D0']});ku.ky.kz.or({obj:['T1','D1']});ku.ky.kz.or({obj:['T5','D1']});ku.ky.kz.or({obj:['T4','D2']});ku.ky.kz.or({obj:['T6','D2']});ku.ky.kz.or({obj:['T2','D3']});ku.ky.kz.or({obj:['T7','D3'],ij:'0'});ku.ky.kz.ow([3,4]);ku.ky.kz.ow([5,6]);ku.ky.kz.oo({op:0,oh:0});ku.ky.kz.oo({op:4,oh:1});ku.ky.kz.oo({op:1,oh:0,oq:{ql:4,height:80,direction:'L',length:100}});ku.ky.kz.oo({op:2,oh:0,oq:{ql:6,height:135,direction:'L',length:100}});ku.ky.kz.pd({X:900,oi:180,oqPipe:7})});ku.levels.push(function(){ku.ky.cat.x=600;ku.ky.cat.maxX=1100;ku.ky.kz.od({X:440,oi:470,oe:100,of:100,og:85});ku.ky.kz.od({X:540,oi:470,oe:100,of:100,og:85});ku.ky.kz.od({X:310,oi:350,oe:40,of:170,og:0});ku.ky.kz.od({X:350,oi:350,oe:40,of:170,og:0});ku.ky.kz.od({X:620,oi:250,oe:40,of:150,og:0});ku.ky.kz.od({X:660,oi:250,oe:40,of:150,og:0});ku.ky.kz.od({X:800,oi:240,oe:45,of:160,og:0});ku.ky.kz.od({X:845,oi:240,oe:45,of:160,og:0});ku.ky.kz.od({X:1000,oi:397,oe:150,of:120,og:80});ku.ky.kz.od({X:1000,oi:-100,oe:2000,of:200,og:1,ij:'0'});ku.ky.kz.om({X:430,oi:355,ij:'0'});ku.ky.kz.om({X:550,oi:255,ij:'0'});ku.ky.kz.om({X:320,oi:150,ij:'0'});ku.ky.kz.om({X:785,oi:180,ij:'0'});ku.ky.kz.om({X:1000,oi:200});ku.ky.kz.or({obj:['T0','D0']});ku.ky.kz.or({obj:['T3','D0']});ku.ky.kz.or({obj:['T1','D1']});ku.ky.kz.or({obj:['T4','D1']});ku.ky.kz.or({obj:['T2','D2']});ku.ky.kz.or({obj:['T7','D2']});ku.ky.kz.or({obj:['T5','D3']});ku.ky.kz.or({obj:['T6','D3']});ku.ky.kz.or({obj:['T8','D4']});ku.ky.kz.or({obj:['T9','D4'],ij:'0'});ku.ky.kz.ow([0,1]);ku.ky.kz.ow([2,3]);ku.ky.kz.ow([4,5]);ku.ky.kz.ow([6,7]);ku.ky.kz.oo({op:2,oh:0});ku.ky.kz.oo({op:5,oh:0});ku.ky.kz.oo({op:8,oh:0,oq:{ql:7,height:125,direction:'L',length:130}});ku.ky.kz.pd({X:1000,oi:180,oqPipe:9})});ku.levels.push(function(){ku.ky.cat.x=500;ku.ky.cat.maxX=1050;ku.ky.kz.od({X:300,oi:270,oe:50,of:300,og:0});ku.ky.kz.od({X:350,oi:270,oe:50,of:300,og:0});ku.ky.kz.od({X:850,oi:370,oe:100,of:200,og:180});ku.ky.kz.od({X:950,oi:370,oe:100,of:200,og:180});ku.ky.kz.od({X:500,oi:340,oe:100,of:100,og:80});ku.ky.kz.od({X:650,oi:290,oe:50,of:150,og:0});ku.ky.kz.od({X:700,oi:290,oe:50,of:150,og:0});ku.ky.kz.od({X:950,oi:-100,oe:2000,of:200,og:1,ij:'0'});ku.ky.kz.ow([0,1]);ku.ky.kz.ow([2,3]);ku.ky.kz.ow([5,6]);ku.ky.kz.om({X:320,oi:170,ij:'0'});ku.ky.kz.om({X:520,oi:270,ij:'0'});ku.ky.kz.om({X:680,oi:220,ij:'0'});ku.ky.kz.om({X:950,oi:200});ku.ky.kz.or({obj:['T0','D0']});ku.ky.kz.or({obj:['T2','D0']});ku.ky.kz.or({obj:['T4','D1']});ku.ky.kz.or({obj:['T5','D1']});ku.ky.kz.or({obj:['T1','D2']});ku.ky.kz.or({obj:['T6','D2']});ku.ky.kz.or({obj:['T3','D3']});ku.ky.kz.or({obj:['T7','D3'],ij:'0'});ku.ky.kz.oo({op:0,oh:0});ku.ky.kz.oo({op:6,oh:0});ku.ky.kz.oo({op:3,oh:0,oq:{ql:6,height:50,direction:'L',length:220}});ku.ky.kz.pd({X:950,oi:180,oqPipe:7})});ku.levels.push(function(){ku.ky.cat.x=300;ku.ky.cat.maxX=1000;ku.ky.kz.od({X:350,oi:350,oe:50,of:200,og:80});ku.ky.kz.od({X:430,oi:450,oe:50,of:100,og:80});ku.ky.kz.od({X:490,oi:300,oe:30,of:120,og:0});ku.ky.kz.od({X:520,oi:300,oe:30,of:120,og:0});ku.ky.kz.od({X:550,oi:300,oe:30,of:120,og:0});ku.ky.kz.od({X:610,oi:420,oe:60,of:130,og:80});ku.ky.kz.od({X:680,oi:260,oe:30,of:160,og:0});ku.ky.kz.od({X:710,oi:260,oe:30,of:160,og:0});ku.ky.kz.od({X:780,oi:185,oe:30,of:235,og:0});ku.ky.kz.od({X:810,oi:185,oe:30,of:235,og:0});ku.ky.kz.od({X:900,oi:370,oe:80,of:180,og:80});ku.ky.kz.od({X:900,oi:-100,oe:2000,of:200,og:1,ij:'0'});ku.ky.kz.ow([2,3,4]);ku.ky.kz.ow([6,7]);ku.ky.kz.ow([8,9]);ku.ky.kz.om({X:370,oi:270,ij:'0'});ku.ky.kz.om({X:450,oi:305,ij:'0'});ku.ky.kz.om({X:570,oi:150,ij:'0'});ku.ky.kz.om({X:630,oi:265,ij:'0'});ku.ky.kz.om({X:730,oi:190,ij:'0'});ku.ky.kz.om({X:900,oi:200});ku.ky.kz.or({obj:['T0','D0']});ku.ky.kz.or({obj:['T3','D0']});ku.ky.kz.or({obj:['T1','D1']});ku.ky.kz.or({obj:['T2','D1']});ku.ky.kz.or({obj:['T4','D2']});ku.ky.kz.or({obj:['T9','D2']});ku.ky.kz.or({obj:['T5','D3']});ku.ky.kz.or({obj:['T6','D3']});ku.ky.kz.or({obj:['T7','D4']});ku.ky.kz.or({obj:['T8','D4']});ku.ky.kz.or({obj:['T10','D5']});ku.ky.kz.or({obj:['T11','D5'],ij:'0'});ku.ky.kz.oo({op:0,oh:0});ku.ky.kz.oo({op:1,oh:0});ku.ky.kz.oo({op:4,oh:1});ku.ky.kz.oo({op:7,oh:0});ku.ky.kz.oo({op:5,oh:0,oq:{ql:4,height:85,direction:'L',length:50}});ku.ky.kz.oo({op:10,oh:0,oq:{ql:9,height:150,direction:'L',length:80}});ku.ky.kz.pd({X:900,oi:180,oqPipe:11})});ku.levels.push(function(){ku.ky.cat.x=300;ku.ky.cat.maxX=1100;ku.ky.kz.od({X:200,oi:370,oe:60,of:180,og:60});ku.ky.kz.od({X:280,oi:370,oe:50,of:180,og:60});ku.ky.kz.od({X:350,oi:300,oe:30,of:140,og:0});ku.ky.kz.od({X:380,oi:300,oe:30,of:140,og:0});ku.ky.kz.od({X:460,oi:420,oe:60,of:130,og:15});ku.ky.kz.od({X:550,oi:380,oe:50,of:170,og:80});ku.ky.kz.od({X:620,oi:300,oe:30,of:140,og:0});ku.ky.kz.od({X:650,oi:300,oe:30,of:140,og:0});ku.ky.kz.od({X:730,oi:420,oe:60,of:130,og:15});ku.ky.kz.od({X:820,oi:380,oe:50,of:170,og:80});ku.ky.kz.od({X:890,oi:300,oe:30,of:140,og:0});ku.ky.kz.od({X:920,oi:300,oe:30,of:140,og:0});ku.ky.kz.od({X:1000,oi:450,oe:80,of:100,og:85});ku.ky.kz.od({X:900,oi:-100,oe:2000,of:200,og:1,ij:'0'});ku.ky.kz.ow([2,3]);ku.ky.kz.ow([6,7]);ku.ky.kz.ow([10,11]);ku.ky.kz.om({X:220,oi:250,ij:'0'});ku.ky.kz.om({X:300,oi:302,ij:'0'});ku.ky.kz.om({X:480,oi:250,ij:'0'});ku.ky.kz.om({X:570,oi:302,ij:'0'});ku.ky.kz.om({X:750,oi:250,ij:'0'});ku.ky.kz.om({X:840,oi:302,ij:'0'});ku.ky.kz.om({X:1000,oi:200});ku.ky.kz.or({obj:['T0','D0']});ku.ky.kz.or({obj:['T3','D0']});ku.ky.kz.or({obj:['T1','D1']});ku.ky.kz.or({obj:['T2','D1']});ku.ky.kz.or({obj:['T4','D2']});ku.ky.kz.or({obj:['T7','D2']});ku.ky.kz.or({obj:['T5','D3']});ku.ky.kz.or({obj:['T6','D3']});ku.ky.kz.or({obj:['T8','D4']});ku.ky.kz.or({obj:['T11','D4']});ku.ky.kz.or({obj:['T9','D5']});ku.ky.kz.or({obj:['T10','D5']});ku.ky.kz.or({obj:['T12','D6']});ku.ky.kz.or({obj:['T13','D6'],ij:'0'});ku.ky.kz.oo({op:0,oh:0});ku.ky.kz.oo({op:1,oh:0});ku.ky.kz.oo({op:5,oh:0});ku.ky.kz.oo({op:9,oh:0});ku.ky.kz.pd({X:1000,oi:180,oqPipe:13});ku.ky.kz.oo({op:4,oh:0,oq:{ql:3,height:90,direction:'L',length:50}});ku.ky.kz.oo({op:8,oh:0,oq:{ql:7,height:85,direction:'L',length:50}});ku.ky.kz.oo({op:12,oh:0,oq:{ql:11,height:85,direction:'L',length:50}})});ku.kv.kw.start=function(){ku.lb.init();ku.lc.init();ku.lf.create();ku.ky.qw.create();ku.ky.cat.create();ku.ky.kz.create();ku.ky.qu.create();ku.ky.qv.create();ku.ky.cat.x=550;ku.ky.cat.maxX=640;ku.ky.cat.mp=1;ku.ball={x:mge.ku.width/2,y:100}};ku.kv.kw.update=function(){ku.ky.cat.update();if(ku.ky.cat.x>=ku.ky.cat.maxX){ku.ky.cat.mp*=0.97};if(ku.ky.cat.mp<=0.4){ku.ky.qv.it('update')};ku.ky.cat.y=300;ku.ball.y=Math.min(300,ku.ball.y+1.5)};ku.kv.kw.draw=function(){let ctx=mge.ku.context;ctx.fillStyle=ku.hsl(ku.kxColor,100,70);ctx.fillRect(0,0,mge.ku.width,mge.ku.height);ctx.fillStyle='#008000';ctx.beginPath();ctx.arc(ku.ball.x,ku.ball.y,9,0,2*Math.PI);ctx.fill();ku.ky.cat.draw();ctx.font="bold 150px sans-serif";ctx.fillStyle='#008000';ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText('T',mge.ku.width/2,150);let a=1-ku.ky.cat.mp;ctx.fillStyle='rgba(0,0,0,'+a+')';ctx.fillText('WASH    HE CAT',mge.ku.width/2+20,150);ctx.font="italic bold 40px sans-serif";ctx.fillStyle='black';ctx.fillText('A game created for JS13K 2025 challenge',mge.ku.width/2,610);ctx.font="italic bold 20px sans-serif";ctx.fillText('by Homer Dilpleu',mge.ku.width/2,650);if(ku.ky.cat.mp<=0.4){ku.ky.qv.it('draw')}};ku.kv.kx.start=function(){ku.lf.generate();ku.rm(ku.curLevel)};ku.kv.kx.update=function(){ku.getLevelState();ku.ky.qu.it('update');if(!ku.rn){ku.ky.cat.update();ku.ky.kz.update()};ku.ky.qw.it('update');if(ku.li=='won'){localStorage.setItem(ku.lh,Math.max(ku.curLevel,Number(localStorage.getItem(ku.lh))))}};ku.kv.kx.draw=function(){ku.lf.draw();ku.ky.kz.drawMode='qm';ku.ky.kz.it('draw');ku.ky.kz.drawMode='other';ku.ky.kz.it('draw');ku.ky.kz.drawMode='qn';ku.ky.kz.it('draw');ku.ky.qu.it('draw');ku.ky.qw.it('draw');ku.ky.cat.draw()};ku.ky.cat.create=function(){this.width=140;this.height=110;this.x=200;this.y=200;this.ih=1.3;this.ii=1.3;this.mp=0;this.mq=0.7;this.maxX=800;this.mr=95;this.ms=20;this.mt=0.005;this.mu=0.02;this.mv='oa';this.mw='';mge.kt.loadExtention(this);this.kt.timeBetweenFrames=220;this.drawCat=function(ctx,mx,my,mz,pahtStain,na){ctx.fillStyle="black";ctx.strokeStyle="black";ctx.lineWidth=3;ctx.lineCap="round";ctx.fill(mx);ctx.fill(my);ctx.stroke(mz);let alpha=Math.min(1,1.2-this.mp);if(this.mp>=1){alpha=0};ctx.fillStyle='rgba(80,220,80,'+alpha+')';ctx.fill(pahtStain);if(na){ctx.strokeStyle="yellow";ctx.stroke(na)}};this.obStain=new Path2D("M60 44 C35 67,85 60,77 54 C90 63,96 52,95 47 C81 44,66 43,60 44");this.obStain3=new Path2D("M60 46 C35 69,85 62,77 56 C90 65,96 54,95 49 C81 46,66 45,60 46");this.ocStain=new Path2D("M60 59 C35 82,85 75,77 69 C90 78,96 67,95 62 C81 59,66 58,60 59");this.nb=new Path2D("M122 36 C100 64,50 24,38 60 C52 78,43 92,37 107 C61 55,93 56,82 107 C92 66,105 64,116 58 Q133 54,121 43");this.nc=new Path2D("M38 60 C53 77,50 98,51 110 C63 40,92 71,97 110 C97 88,92 65,116 58");this.nd=new Path2D("M38 60 C27 63,25 76,11 78");this.ne={draw:function(ctx){ku.ky.cat.drawCat(ctx,ku.ky.cat.nb,ku.ky.cat.nc,ku.ky.cat.nd,ku.ky.cat.obStain)}};this.nf=new Path2D("M122 36 C100 64,50 24,38 60 C55 78,47 92,46 105 C61 55,93 56,91 105 C92 66,105 64,116 58 Q133 54,121 43");this.ng=new Path2D("M38 60 C53 77,50 98,51 110 C63 40,92 71,97 110 C97 88,92 65,116 58");this.nh=new Path2D("M38 60 C27 63,25 76,11 78");this.ni={draw:function(ctx){ku.ky.cat.drawCat(ctx,ku.ky.cat.nf,ku.ky.cat.ng,ku.ky.cat.nh,ku.ky.cat.obStain)}};this.nj=new Path2D("M122 38 C100 66,50 26,38 62 C55 78,47 92,46 110 C61 57,93 58,89 110 C92 68,105 66,116 60 Q133 56,121 45");this.nk=new Path2D("M38 62 C58 77,60 98,62 110 C57 44,96 73,105 110 C102 90,93 67,116 60");this.nl=new Path2D("M38 62 C27 63,25 76,11 80");this.nm={draw:function(ctx){ku.ky.cat.drawCat(ctx,ku.ky.cat.nj,ku.ky.cat.nk,ku.ky.cat.nl,ku.ky.cat.obStain3)}};this.nn=[this.ne,this.ni,this.nm];this.no=new Path2D("M110 36 C100 64,50 24,38 60 C55 78,47 92,46 105 C61 55,93 56,91 105 C92 66,105 64,116 58 Q133 54,122 35 Q117 48,110 36");this.np=new Path2D("M110 45 Q112 48,115 45 M119 45 Q122 48,124 45");this.nq={draw:function(ctx){ku.ky.cat.drawCat(ctx,ku.ky.cat.no,ku.ky.cat.ng,ku.ky.cat.nh,ku.ky.cat.obStain,ku.ky.cat.np)}};this.nr=[this.nq];this.nu=new Path2D("M121 47 C100 84,50 39,38 72 C48 78,41 92,23 110 C61 67,93 81,140 95 C91 72,110 71,120 68 Q127 64,121 54 ");this.nv=new Path2D("M38 72 C40 77,19 98,13 100 C84 65,92 80,129 110 C105 88,92 65,114 68");this.nw=new Path2D("M37 73 C27 66,25 76,9 70");this.nx={draw:function(ctx){ku.ky.cat.drawCat(ctx,ku.ky.cat.nu,ku.ky.cat.nv,ku.ky.cat.nw,ku.ky.cat.ocStain)}};this.ns=[this.nx]};ku.ky.cat.update=function(){this.y=mge.ku.height-50-this.height/2;let ny=10000;let nz=10000;ku.ky.kz.qj.forEach(function(qq){if(qq.pe.flow<0){if(Math.abs(qq.x-ku.ky.cat.x)<ny){ny=Math.abs(qq.x-ku.ky.cat.x);nz=qq.x-ku.ky.cat.x}};});if(ny==10000){ku.ky.cat.x+=ku.ky.cat.mq;ku.ky.cat.mv='ob'}else if(ny>ku.ky.cat.mr+10){ku.ky.cat.x+=ku.ky.cat.mq;ku.ky.cat.mv='ob'}else if(ny>ku.ky.cat.mr){ku.ky.cat.mv='oa'}else if(ny<=ku.ky.cat.ms){ku.ky.cat.mv='oc';ku.ky.cat.x+=ku.ky.cat.mq*0.5;ku.ky.cat.mp+=ku.ky.cat.mu}else if(nz>0){ku.ky.cat.x-=ku.ky.cat.mq*2;ku.ky.cat.mv='ob';ku.ky.cat.mp+=ku.ky.cat.mt}else if(this.x>this.maxX){ku.ky.cat.mv='oa'}else{ku.ky.cat.x+=ku.ky.cat.mq*2;ku.ky.cat.mv='ob';ku.ky.cat.mp+=ku.ky.cat.mt};if(this.x>this.maxX){ku.ky.cat.mv='oa';this.x=this.maxX};if(this.mp>1){this.mp=1}};ku.ky.cat.ig=function(ctx){if(ku.rn){this.mv='oa'};if(this.mv !=this.mw){if(this.mv=='oa'){this.kt.frames=this.nr};if(this.mv=='ob'){this.kt.frames=this.nn};if(this.mv=='oc'){this.kt.frames=this.ns;ku.lb.cat.play(440,mge.hq.hn,0.5,0.4)};this.kt.restart()};this.mw=this.mv;this.kt.draw(ctx)};ku.ky.kz.reInit=function(){this.qe=[];this.qf=[];this.qg=[];this.qh=[];this.qi=[];this.qj=[]};ku.ky.kz.create=function(){this.width=100;this.height=100;this.qc=0.5;this.qd=50;this.reInit();this.waterCol=ku.hsl(ku.kxColor,100,75)};ku.ky.kz.od=function(c){let o=ku.ky.kz.iq();o.type='T';o.oe=c.oe;o.of=c.of;o.og=c.og;o.oh=1;o.X=c.X;o.oi=c.oi;o.width=c.oe;o.height=c.of;o.x=c.X;o.y=mge.ku.height-c.oi-c.of/2;o.ij=c.ij||'1';o.oj=o.x;o.ok=o.y+o.height/2;o.ol=[];ku.ky.kz.qe.push(o)};ku.ky.kz.om=function(c){let o=ku.ky.kz.iq();o.type='D';o.on=0;o.X=c.X;o.oi=c.oi;o.width=20;o.height=20;o.x=c.X;o.y=mge.ku.height-c.oi-10;o.ij=c.ij||'1';o.oj=o.x;o.ok=o.y;o.ol=[];ku.ky.kz.qf.push(o)};ku.ky.kz.oo=function(c){let o=ku.ky.kz.iq();o.type='V';o.op=ku.ky.kz.qe[c.op];o.op.oh=c.oh;o.oq=c.oq||'click';o.X=o.op.X+15;o.oi=o.op.oi-35;o.width=50;o.height=50;o.x=o.X;o.y=mge.ku.height-o.oi-10;o.ij=c.ij||'1';ku.ky.kz.qi.push(o)};ku.ky.kz.or=function(c){let o=ku.ky.kz.iq();o.type='P';let idObj1=c.obj[0].slice(1);let idObj2=c.obj[1].slice(1);if(c.obj[0][0]=='T'){o.os=ku.ky.kz.qe[idObj1]};if(c.obj[0][0]=='D'){o.os=ku.ky.kz.qf[idObj1]};if(c.obj[1][0]=='T'){o.ot=ku.ky.kz.qe[idObj2]};if(c.obj[1][0]=='D'){o.ot=ku.ky.kz.qf[idObj2]};o.os.ol.push(o.ot);o.ot.ol.push(o.os);o.flow=0;o.width=Math.abs(o.os.oj-o.ot.oj);o.height=Math.abs(o.os.ok-o.ot.ok);o.x=(o.os.oj+o.ot.oj)/2;o.y=(o.ot.ok+o.os.ok)/2;o.ou={};o.ov={};if(o.os.oj<o.ot.oj){o.ou.x=0;o.ov.x=o.width}else{o.ou.x=o.width;o.ov.x=0};if(o.os.ok<o.ot.ok){o.ou.y=0;o.ov.y=o.height}else{o.ou.y=o.height;o.ov.y=0};o.ij=c.ij||'1';ku.ky.kz.qg.push(o)};ku.ky.kz.ow=function(c){let o=ku.ky.kz.iq();o.type='C';let ox=0;let oy=0;let oz=0;let pa=0;let pb=0;o.ol=[];c.forEach(function(pc){let ql=ku.ky.kz.qe[pc];o.ol.push(ql);ox+=1;oy+=ql.X;oz+=ql.oi;pa+=ql.width;pb+=ql.height;ql.ij=0;});o.og=0;o.oe=pa;o.of=pb/ox;o.X=oy/ox;o.oi=oz/ox;o.width=o.oe;o.height=o.of;o.x=o.X;o.y=mge.ku.height-o.oi-o.of/2;o.ij=c.ij||'1';ku.ky.kz.qh.push(o)};ku.ky.kz.pd=function(c){let o=ku.ky.kz.iq();o.type='S';o.pe=ku.ky.kz.qg[c.oqPipe];o.oh=ku.ky.kz.qg[c.oqPipe];o.X=c.X;o.oi=c.oi;o.width=50;o.height=50;o.x=c.X;o.y=mge.ku.height-c.oi-10;o.ij=c.ij||'1';ku.ky.kz.qj.push(o)};ku.ky.kz.update=function(){ku.ky.kz.pj();ku.ky.kz.pk();ku.ky.kz.pl();ku.ky.kz.pp();ku.ky.kz.pr();ku.ky.kz.pv()};ku.ky.kz.pj=function(){ku.ky.kz.qe.forEach(function(ql){ql.ho=ql.oe*ql.og;ql.on=ql.oi+ql.og;if(ql.og==0){ql.on=Math.min(ql.ol[0].on,ql.on)};})};ku.ky.kz.pk=function(){ku.ky.kz.qi.forEach(function(qp){if(qp.oq=='click'){if(qp.hz){if(qp.op.oh==1){qp.op.oh=0}else{qp.op.oh=1}};}else{qp.op.oh=0;if(ku.ky.kz.qe[qp.oq.ql].og>=qp.oq.height){qp.op.oh=1}};})};ku.ky.kz.pl=function(){ku.ky.kz.qf.forEach(function(qn){let pm=0;let pn=0;qn.on=0;qn.ol.forEach(function(po){if(po.oh==1){pm+=po.on;pn+=1};});if(pn>0){qn.on=pm/pn};})};ku.ky.kz.pp=function(){ku.ky.kz.qg.forEach(function(qm){qm.flow=qm.os.on-qm.ot.on;qm.flow=Math.round(qm.flow*ku.ky.kz.qc);if(qm.os.oh==0){qm.flow=0};if(qm.ot.oh==0){qm.flow=0};if(qm.flow>0 && qm.flow<ku.ky.kz.qd){qm.flow=ku.ky.kz.qd};if(qm.flow<0 && qm.flow>-ku.ky.kz.qd){qm.flow=-ku.ky.kz.qd};})};ku.ky.kz.pr=function(){ku.ky.kz.qg.forEach(function(qm){let op={};if(qm.os.type=='T'){op=qm.os};if(qm.ot.type=='T'){op=qm.ot};let hoToMove=qm.flow;let pt=hoToMove/op.oe;op.og-=pt;if(op.og<0){op.og=0};})};ku.ky.kz.pv=function(){ku.ky.kz.qh.forEach(function(qo){let pw=0;let ox=0;qo.ol.forEach(function(ql){ox+=1;if(ql.og>=1){pw+=ql.og};});pw=pw/ox;qo.og=pw;qo.ol.forEach(function(ql){ql.og=pw;});})};ku.ky.kz.ig=function(ctx){if(this.ij==1 && this.drawMode=='qm'){if(this.type=='P'){this.qb(ctx)}};if(this.ij==1 && this.drawMode=='qn'){if(this.type=='D'){this.pz(ctx)};if(this.type=='V'){this.qa(ctx)}};if(this.ij==1 && this.drawMode=='other'){if(this.type=='T'){this.py(ctx)};if(this.type=='S'){this.drawShower(ctx)};if(this.type=='C'){this.drawCombo(ctx)};if(this.type=='L'){this.linkTanks(ctx)}}};ku.ky.kz.py=function(ctx){ctx.fillStyle="black";ctx.fillRect(0,0,this.oe,this.of);ctx.fillStyle="darkgrey";ctx.fillRect(2,2,this.oe-4,this.of-4);ctx.fillStyle="black";ctx.fillRect(4,4,this.oe-8,this.of-8);ctx.fillStyle="dimgrey";ctx.fillRect(6,6,this.oe-12,this.of-12);ctx.fillStyle=this.waterCol;ctx.strokeStyle="black";ctx.lineWidth=2;ctx.fillRect(6,this.of-6,this.oe-12,-this.og);ctx.strokeRect(6,this.of-6,this.oe-12,-this.og);ctx.fillStyle=ku.hsl(ku.kxColor,35,15);ctx.fillRect(this.width/2,0,4,130-this.y+this.height/2)};ku.ky.kz.pz=function(ctx){ctx.strokeStyle="black";ctx.fillStyle="darkgrey";ctx.lineWidth=2;ctx.fillRect(0,0,20,20);ctx.strokeRect(0,0,20,20)};ku.ky.kz.qa=function(ctx){ctx.fillStyle="black";ctx.strokeStyle="black";ctx.lineWidth=2;if(this.oq=='click'){if(this.op.oh==0){ctx.fillRect(5,0,10,50);ctx.fillRect(15,15,15,20);ctx.fillStyle="red";ctx.fillRect(30,10,10,30);ctx.strokeRect(30,10,10,30);}else{ctx.fillRect(15,0,10,50);ctx.fillRect(20,15,20,20);ctx.fillStyle="green";ctx.fillRect(40,10,10,30);ctx.strokeRect(40,10,10,30)};}else{if(this.op.oh==0){ctx.fillRect(-10,15,40,20);ctx.fillRect(5,0,10,50);ctx.fillStyle="red";ctx.fillRect(-10,23,-this.oq.length,4);ctx.strokeRect(-10,23,-this.oq.length,4);}else{ctx.fillRect(-10,15,10,20);ctx.fillRect(20,15,10,20);ctx.fillStyle="green";ctx.fillRect(-10,23,-this.oq.length,4);ctx.strokeRect(-10,23,-this.oq.length,4)}}};ku.ky.kz.qb=function(ctx){ctx.beginPath();ctx.moveTo(this.ou.x,this.ou.y);ctx.lineTo(this.ou.x,this.ov.y);ctx.lineTo(this.ov.x,this.ov.y);ctx.lineJoin="round";ctx.strokeStyle="black";ctx.lineWidth=22;ctx.stroke();ctx.strokeStyle="darkgrey";ctx.lineWidth=18;ctx.stroke();ctx.strokeStyle="black";ctx.lineWidth=14;ctx.stroke();ctx.strokeStyle="dimgrey";if(Math.abs(this.flow)>0){ctx.strokeStyle=this.waterCol};if(this.os.og !=0 && this.os.oh==1){ctx.strokeStyle=this.waterCol};if(this.ot.og !=0 && this.ot.oh==1){ctx.strokeStyle=this.waterCol};ctx.lineWidth=10;ctx.stroke()};ku.ky.kz.drawShower=function(ctx){ctx.strokeStyle="black";ctx.fillStyle="darkgrey";ctx.lineWidth=2;ctx.beginPath();ctx.moveTo(this.width/2,-2);ctx.lineTo(this.width+2,this.height+2);ctx.lineTo(-2,this.height+2);ctx.lineTo(this.width/2,-2);ctx.fill();ctx.stroke();if(this.pe.flow<0 && ku.li=='running'){ctx.fillStyle=this.waterCol;ctx.fillRect(-3,53,56,122)}};ku.ky.kz.drawCombo=function(ctx){this.py(ctx)};ku.ky.qu.create=function(){p=ku.ky.qu.iq();p.id='qr';p.width=700;p.height=350;p.x=630;p.y=330;p.txt='';p.curDisplayScore=0;p=ku.ky.qu.iq();p.id='qs';p.width=100;p.height=100;p.x=750;p.y=395;p.path=new Path2D("M0 50 L20 30 V40 L100 50 L20 60 V70 L0 50");p.vx=1;p=ku.ky.qu.iq();p.id='qt';p.width=100;p.height=100;p.x=740;p.y=480;p=ku.ky.qu.iq();p.id='perfect';p.width=0;p.height=0;p.x=650;p.y=300;p.perfectTxt='GREAT!';p=ku.ky.qu.iq();p.id='pause';p.width=0;p.height=0;p.x=650;p.y=150};ku.ky.qu.update=function(){if(this.id=='qr'){if(ku.li=='running'){this.ii=0;this.curDisplayScore=0}else{ku.ktInProgress=true;this.ii+=0.05};if(this.ii>=1){this.ii=1;if(this.curDisplayScore<ku.ky.cat.mp*100){this.curDisplayScore+=2;}else{ku.ktInProgress=false}};if(ku.li=='failed'){this.txt='LEVEL '+Number(ku.curLevel+1)+' FAILED'}else{this.txt='LEVEL '+Number(ku.curLevel+1)+' COMPLETED'};if(this.curDisplayScore<ku.ky.cat.mp*100){this.txt=''}};if(this.id=='qs'){if(this.x<740){this.vx=0.4};if(this.x>760){this.vx=-0.4};this.x+=this.vx};if(this.id=='perfect' && ku.ky.cat.mv=='oc'){this.ih=Math.min(1,this.ih+0.05);this.ii=Math.min(1,this.ii+0.05)};if(this.id=='perfect' && ku.ky.cat.mv !='oc'){this.ih=0;this.ii=0;let array=['GREAT!','AMAZING!','FANTASTIC!','SUPERB!','EXCELLENT!','NICE!'];this.perfectTxt=array[Math.floor(Math.random()*array.length)]}};ku.ky.qu.ig=function(ctx){if(this.id=='qr' && ku.li !='running'){ctx.fillStyle=ku.hsl(ku.kxColor,100,98);ctx.strokeStyle=ku.hsl(ku.kxColor,100,15);ctx.lineWidth=4;ctx.fillRect(0,0,this.width,this.height+50);ctx.strokeRect(0,0,this.width,this.height+50);ctx.font="bold 50px sans-serif";ctx.fillStyle=ku.hsl(ku.kxColor,100,15);ctx.textAlign='center';ctx.fillText(this.txt,this.width/2,80);ctx.fillRect(100,190,this.curDisplayScore*5,50);ctx.strokeRect(100,190,500,50);ctx.fillText(Math.round(this.curDisplayScore)+'%',this.width/2,150)};if(this.id=='qs' && ku.curLevel==0 && ku.li=='running'){ctx.fillStyle='yellow';ctx.strokeStyle='black';ctx.lineWidth=2;ctx.fill(this.path);ctx.stroke(this.path)};if(this.id=='qt' && ku.curLevel==0 && ku.li=='running'){ctx.fillStyle='black';ctx.font="bold 12px sans-serif";ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText('OPEN/CLOSE THE TAP',80,0)};if(this.id=='qt' && ku.curLevel==3 && ku.li=='running'){ctx.fillStyle='black';ctx.font="bold 12px sans-serif";ctx.fillText('REACH THIS POINT TO OPEN VALVE',40,50)};if(this.id=='perfect' && ku.ky.cat.mv=='oc'){ctx.fillStyle='#FF0000';ctx.strokeStyle='black';ctx.font="bold 200px sans-serif";ctx.lineWidth=4;ctx.fillText(this.perfectTxt,0,0);ctx.strokeText(this.perfectTxt,0,0)};if(this.id=='pause' && ku.rn && ku.li=='running'){ctx.fillStyle='yellow';ctx.strokeStyle='black';ctx.font="bold 200px sans-serif";ctx.lineWidth=4;ctx.fillText('PAUSE',0,0);ctx.strokeText('PAUSE',0,0)}};ku.ky.qv.create=function(){this.width=200;this.height=50;this.x=640;p=ku.ky.qv.iq();p.id='restart';p.y=495;p.txt='RESTART';p=ku.ky.qv.iq();p.id='continue';p.y=430;p.txt='CONTINUE';p=ku.ky.qv.iq();p.id='play';p.y=430;p.txt='PLAY'};ku.ky.qv.update=function(){if(Number(localStorage.getItem(ku.lh)||'0')>0){if(this.id=='continue'){this.ij=true;if(this.hz){ku.lc.kxSong.playSong();ku.curLevel=Number(localStorage.getItem(ku.lh));mge.ku.hu(ku.kv.kx)}};if(this.id=='restart'){this.ij=true;if(this.hz){ku.lc.kxSong.playSong();ku.curLevel=0;mge.ku.hu(ku.kv.kx)}};if(this.id=='play'){this.ij=false};}else{if(this.id=='continue'){this.ij=false};if(this.id=='restart'){this.ij=false};if(this.id=='play'){this.ij=true;if(this.hz){ku.lc.kxSong.playSong();ku.curLevel=0;mge.ku.hu(ku.kv.kx)}}}};ku.ky.qv.ig=function(ctx){ctx.fillStyle=ku.hsl(ku.kxColor,100,95);ctx.strokeStyle=ku.hsl(ku.kxColor,100,5);ctx.lineWidth=3;ctx.fillRect(0,0,this.width,this.height);ctx.strokeRect(0,0,this.width,this.height);ctx.font="bold 20px sans-serif";ctx.fillStyle=ku.hsl(ku.kxColor,100,5);ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText(this.txt,this.width/2,this.height/2)};ku.ky.qw.create=function(){p=ku.ky.qw.iq();p.id='restart';p.width=50;p.height=50;p.x=200;p.y=600;p.svg=new Path2D('M16 12 A17 17 0 1 0 34 12 L30 20 M34 12 L45 15');p=ku.ky.qw.iq();p.id='pause';p.width=50;p.height=50;p.x=260;p.y=600;p.qx=new Path2D('M10 10 L40 25 L10 40 L10 10');p.qy=new Path2D('M20 12 L20 40 M30 12 L30 40');p=ku.ky.qw.iq();p.id='hq';p.width=50;p.height=50;p.x=320;p.y=600;p.svgOn=new Path2D('M7 20 L7 30 L15 30 L30 40 L30 10 L15 20 L7 20 M37 15 L37 35 M44 10 L44 40');p.svgOff=new Path2D('M7 20 L7 30 L15 30 L30 40 L30 10 L15 20 L7 20 M37 20 L44 30 M44 20 L37 30');p=ku.ky.qw.iq();p.id='next';p.width=50;p.height=50;p.x=670;p.y=450;p.svg=new Path2D('M10 10 L40 25 L10 40');for(let i=1;i<=ku.levels.length;i++){p=ku.ky.qw.iq();p.id='lvl';p.width=30;p.height=30;p.x=430+i*40;p.y=515;p.lvlNb=i}};ku.ky.qw.update=function(){if(this.id=='restart'){if(this.hz){ku.rn=false;ku.rm(ku.curLevel)};if(ku.li !='running' && !ku.ktInProgress){if(ku.li=='failed'){this.x=630;this.y=450;}else{this.x=590;this.y=450};}else{this.x=200;this.y=600}};if(this.id=='pause'){if(this.hz){ku.rn=!ku.rn;if(ku.rn){mge.hs.stop();}else{mge.hs.start()}};this.ij=true;if(ku.li!='running' && !ku.ktInProgress){this.ij=false}};if(this.id=='hq'){if(this.hz){ku.hqOn=!ku.hqOn;if(!ku.hqOn){mge.hq.ho=0;}else{mge.hq.ho=0.75}};this.ij=true;if(ku.li!='running' && !ku.ktInProgress){this.ij=false}};if(this.id=='next'){if(ku.li=='won' &&  !ku.ktInProgress){this.ij=true}else{this.ij=false};if(this.hz && this.ij){ku.rn=false;ku.rm(ku.curLevel+1)}};if(this.id=='lvl' && this.hz && this.lvlNb-1<=Number(localStorage.getItem(ku.lh))){ku.rn=false;ku.rm(this.lvlNb-1)}};ku.ky.qw.ig=function(ctx){if(this.id !='lvl'){ctx.fillStyle=ku.hsl(ku.kxColor,100,95);ctx.strokeStyle=ku.hsl(ku.kxColor,100,15);ctx.lineWidth=4;ctx.lineCap="round";if(this.hz){ctx.fillStyle="white"};ctx.fillRect(0,0,50,50);ctx.strokeRect(0,0,50,50);if(this.id=='restart'){ctx.stroke(this.svg)};if(this.id=='next'){ctx.stroke(this.svg)};if(this.id=='pause'){if(ku.rn){ctx.stroke(this.qx)}else{ctx.stroke(this.qy)}};if(this.id=='hq'){if(ku.hqOn){ctx.stroke(this.svgOn)}else{ctx.stroke(this.svgOff)}};}else{if(ku.li !='running' && !ku.ktInProgress){if(this.lvlNb-1<=Number(localStorage.getItem(ku.lh))){ctx.fillStyle=ku.hsl(ku.kxColor,100,95)}else{ctx.fillStyle=ku.hsl(ku.kxColor,50,50)};ctx.strokeStyle=ku.hsl(ku.kxColor,100,15);ctx.lineWidth=2;ctx.fillRect(0,0,this.width,this.height);ctx.strokeRect(0,0,this.width,this.height);ctx.font="bold 16px sans-serif";ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillStyle=ku.hsl(ku.kxColor,100,15);ctx.fillText(this.lvlNb,this.width/2,this.height/2)}}}