"use strict";var r={costNames:["power","crystal","scrap","human"],buildings:[[[43200,57600,86400,0],[300,300,300,300],[2,2,2,2],[3,3],"Starbase","Your main base of operations.",0,"gold",18],[[0,0,10,0],[0,0,0,0],[0,0,0,0],[1,1],"Pipe","Used to connect buildings.",0,"orange",15],[[60,60,120,0],[30,0,0,0],[1,0,0,0],[2,2],"Power","Increase the maximum power capacity.",0,"yellow",15],[[120,120,120,0],[0,0,0,30],[0,0,0,1],[2,2],"Human","Create more humans.",0,"white",13],[[120,120,120,0],[0,0,30,0],[0,0,1,0],[2,2],"S*****","Used to mine s*****.",4,"silver",17],[[120,120,120,0],[0,30,0,0],[0,1,0,0],[2,2],"Crystal","Used to mine crystal.",2,"lightblue",14],[[240,240,240,0],[100,100,100,100],[0,0,0,0],[2,2],"Storage","Increase all storage capacity.",0,"#444",12]],purchase:function(e,n){var t,a=["power","crystal","s*****","human"];for(t=0;t<a.length;t++)e[a[t]]-=r.buildings[n][0][t]},getWallet:function(e,n){var t,a,o,s,i=["power","crystal","s*****","human"];for(e.caps=[],e.plus=[],t=0;t<i.length;t++)e.caps.push(10),e.plus.push(0);for(a=0;a<e.b.length;a++){for(o=e.b[a],s=r.buildings[0|o.id],t=0;t<i.length;t++)o.power&&(e.caps[t]+=s[1][t],e.plus[t]+=s[2][t]),n&&o.power&&(e[i[t]]+=Math.floor((Date.now()-o.time)/1e3*s[2][t]));o.time=Date.now()}for(t=0;t<i.length;t++)n||(e[i[t]]+=Math.floor((Date.now()-e.time)/1e3*e.plus[t])),e[i[t]]>e.caps[t]&&(e[i[t]]=e.caps[t]);return e.time=Date.now(),[e.power,e.crystal,e.scrap,e.human]},up:function(r,e,n){return 0>n-1?-1:r[e][n-1]},down:function(r,e,n){return n+1>24?-1:r[e][n+1]},left:function(r,e,n){return 0>e-1?-1:r[e-1][n]},right:function(r,e,n){return e+1>24?-1:r[e+1][n]},isOverlapping:function(r,e,n,t,a,o,s,i){return a+s>r&&r+n>a&&o+i>e&&t+e>o?!0:!1},canPlace:function(e,n,t){var a,o,s,i,u,h,l;if(t.length<5)return null;if(e[t[0]][t[1]]>0)return!1;for(o=0;o<n.length;o++)if(a=n[o],(1!==(0|a.id)&&1!==(0|t[5])||1===(0|t[5]))&&r.isOverlapping(t[0],t[1],t[2],t[3],a.x,a.y,a.w,a.h))return!1;for(s=!1,i=0;i<t[2];i++)for(u=0;u<t[3];u++){if(h=i+t[0],l=u+t[1],!e[h]||0!==e[h][l])return!1;t[4]>0&&(0===i&&r.left(e,h,l)===t[4]&&(s=!0),i===t[2]-1&&r.right(e,h,l)===t[4]&&(s=!0),0===u&&r.up(e,h,l)===t[4]&&(s=!0),u===t[3]-1&&r.down(e,h,l)===t[4]&&(s=!0))}return s||t[4]<1?!0:!1},canBuy:function(r,e){for(var n=0;n<r.length;n++)if(e[n]&&e[n]>r[n])return!1;return!0},isPowered:function(e,n){var t,a,o,s;for(t=0;t<n.length;t++){for(a=n[t],o=r.findNearBuildings(e.b,a),a.power===!1,s=0;s<o.length;s++)!o[s].power&&2!==(0|a.id)||a.power!==!1||(a.power=!0,r.isPowered(e,o));o.length||2!==(0|a.id)||a.power!==!1||(a.power=!0)}},handleOverlap:function(e){var n,t,a,o,s,i=[];for(n=0;n<e.b.length;n++){for(t=e.b[n],a=!1,o=0;o<e.b.length;o++)n!==o&&(s=e.b[o],r.isOverlapping(t.x,t.y,t.w,t.h,s.x,s.y,s.w,s.h)&&1===(0|t.id)&&(a=!0));a===!1&&i.push(t)}e.b=i},getCoords:function(r){var e,n,t=[];for(e=0;e<r.w;e++)t.push({x:r.x+e,y:r.y-1}),t.push({x:r.x+e,y:r.y+r.h});for(n=0;n<r.h;n++)t.push({x:r.x-1,y:r.y+n}),t.push({x:r.x+r.w,y:r.y+n});return t},findNearBuildings:function(e,n){var t,a=[];for(t=0;t<e.length;t++)(r.matchCoords(r.getCoords(n),e[t])||r.matchCoords(r.getCoords(e[t]),n))&&a.push(e[t]);return a},matchCoords:function(e,n){for(var t=0;t<e.length;t++)if(r.isOverlapping(e[t].x,e[t].y,1,1,n.x,n.y,n.w,n.h))return!0;return!1}};"object"==typeof module&&module.exports?module.exports=r:window.shared=r;